!function(){"use strict";var e,t={9972:function(e,t,i){var n;i.d(t,{s:function(){return n}}),function(e){e.Section="SECTION",e.Widget="WIDGET"}(n||(n={}))},5588:function(e,t,i){var n=i(3316),o=i(5380),a=i(5312),r=i(3868);t.c=(0,n.U)((({popup:e})=>({filterPhrase:e.filterPhrase,showFilter:e.popupType===a.HH.AddWidget})),(()=>({applyFilter:o.cr})))(r.c)},5064:function(e,t,i){var n=i(3316),o=i(8700),a=i(4612),r=i(5312),s=i(6552);t.c=(0,n.U)((e=>{var t;const i=(({editableAreasConfiguration:e,metadata:t,popup:i,widgetZonesConfiguration:n})=>{const a=e[i.areaIdentifier],r=n[i.zoneIdentifier];return(0,o.c)(i.popupType,t,a,r)})(e),{popup:n}=e,s=n.popupType===r.HH.AddWidget&&null!==(t=n.recentWidgets)&&void 0!==t?t:[];return{recentItems:s,columnType:n.columnType,showComponent:n.popupType===r.HH.AddWidget&&i.length>a.Yn&&s.length>0}}))(s.c)},2440:function(e,t,i){var n=i(3316),o=i(100),a=i(5380),r=i(5312),s=i(4364);(0,n.U)((({popup:e},{sectionIdentifier:t})=>({isSectionListOpen:e.componentIdentifier===t&&e.popupType===r.HH.AddSection})),(()=>({closePopup:o.Sq,openPopup:(e,t,i)=>(0,a._Q)(e,r.HH.AddSection,t,i),setPopupPosition:o.Om})))(s.c)},7780:function(e,t,i){i.d(t,{A$:function(){return s},GQ:function(){return r},gT:function(){return a},ym:function(){return o}});var n=i(7820);const o=(e,t)=>{const i=Object.values(t);return null===e?i:e.length?i.filter((t=>c(e,t.typeIdentifier))):[]},a=(e,t)=>null===e||!!e.length&&c(e,t),r=(e,t)=>e&&n._k.contains(e,t),s=(e,t)=>null===e||null===t?null!=e?e:t:null==e?void 0:e.filter((e=>c(t,e))),c=(e,t)=>e.some((e=>n.sj.equalsIgnoreCase(e,t)))},696:function(e,t,i){i.d(t,{G:function(){return a},Gk:function(){return r}});const n=Object.prototype.hasOwnProperty,o=(e,t)=>e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t,a=(e,t)=>{if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(let a=0;a<i.length;a++)if(!n.call(t,i[a])||!o(e[i[a]],t[i[a]]))return!1;return!0},r=e=>Array.isArray(e)?e.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{type:null}})),{}):e},7820:function(e,t,i){i.d(t,{SM:function(){return p},_k:function(){return c},sL:function(){return u},sj:function(){return s},sz:function(){return g},wd:function(){return r}});var n=i(7540),o=i(5312),a=i(655);const r={isEmpty(e){return e.constructor===Object&&0===Object.keys(e).length},assignDefined(e,...t){for(const i of t)for(const t of Object.keys(i)){const n=i[t];void 0!==n&&(e[t]=n)}return e}},s={format(e,...t){let i=e;return t.forEach(((e,t)=>{i=i.replace(new RegExp("\\{"+t+"\\}","g"),e)})),i},equalsIgnoreCase(e,t){return 0===e.localeCompare(t,void 0,{sensitivity:"base"})}},c={insertItemIntoArray(e,t,i){return i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i)]},replaceItem:(e,t,i)=>!e.length||i>e.length||i<0?e:[...e.slice(0,i),t,...e.slice(i+1)],removeItem:(e,t)=>t>e.length||t<0?e:[...e.slice(0,t),...e.slice(t+1)],moveItemBetweenArrays:(e,t,i,n=null)=>{const o=null===n?e.length-1:n.length;if(i<0||i>o)throw new RangeError("The [position] argument is invalid.");if(!c.contains(e,t))throw new Error("The [item] was not found in [sourceArray].");const a=e.filter((e=>e!==t));return null===n?{sourceArray:c.insertItemIntoArray(a,t,i),destinationArray:null}:{sourceArray:a,destinationArray:c.insertItemIntoArray(n,t,i)}},getUniqueValues:(e,t=(e=>e))=>[...new Set(e.map(t))],contains:(e,t)=>e.indexOf(t)>=0,move:(e,t,i)=>(e.splice(i,0,e.splice(t,1)[0]),e),swap:(e,t,i)=>{const[n,o]=t>i?[i,t]:[t,i];return[...e.slice(0,n),e[o],...e.slice(n+1,o),e[n],...e.slice(o+1)]},toRecord:(e,t)=>e.reduce(((e,i)=>(e[i[t]]=i,e)),{})},l=(e,t)=>{const i=new CustomEvent(e,{detail:t});document.dispatchEvent(i)},d=e=>{let t=[],i=e.target;if(e.path)t=e.path;else for(;i;)t.push(i),i=i.parentElement;return t.filter((e=>e instanceof Node))},p={removeSectionFromDragAndDrop:e=>{l(n.MJ,{sectionIdentifier:e})},mountSectionToDragAndDropAfterNextTick:async(e,t)=>{await e.$nextTick((()=>{p.mountSectionToDragAndDrop(t)}))},mountSectionToDragAndDrop:e=>{l(n.ik,{sectionIdentifier:e})}},g={disableDocumentLinks:()=>{const e=document.getElementsByTagName("a"),t=e.length;for(let i=0;i<t;i++)e[i].onclick=()=>!1},disableElementLinks:e=>{const t=e.getElementsByTagName("a"),i=t.length;let n;for(let e=0;e<i;e++)n=t[e],n.closest("div[data-inline-editor]")||(n.onclick=()=>!1)}},u={getTheme:e=>{switch(e){case o.HH.AddWidget:case o.HH.Personalization:return a.So.Widget;case o.HH.AddSection:case o.HH.ChangeSection:return a.So.Section}},isFriendlyElementSelected:(e,t)=>d(e).some((e=>t.some((t=>{const i=document.querySelector(t);return i&&(i===e||i.contains(e))})))),doesElementOrAncestor(e,t,i){let n=e;for(;n;){if(i(n))return!0;if(t&&t===n)break;n=n.parentElement}return!1}}},8700:function(e,t,i){i.d(t,{A:function(){return c},c:function(){return s}});var n=i(6012),o=i(7780),a=i(5312),r=i(655);const s=(e,t,i,s)=>{var c;if(![a.HH.AddWidget,a.HH.AddSection].includes(e))return[];const l=(0,n.Km)(r.UH.PopUpElementsService),d=e===a.HH.AddWidget,p=d?t.widgets:t.sections,g=d?(0,o.A$)(i.widgetRestrictions,null!==(c=null==s?void 0:s.widgetRestrictions)&&void 0!==c?c:null):i.sectionRestrictions,u=(0,o.ym)(g,p);return d?l.getWidgetElements(u):l.getSectionElements(u)},c=(e,t)=>{if(!t)return e;const i=t.toLowerCase();return e.filter((e=>e.name.toLowerCase().includes(i)))}},1220:function(e,t,i){i.d(t,{Oc:function(){return o},Qn:function(){return a},kX:function(){return d},se:function(){return r}});var n=i(5312);const o={Pixel:"pixel",Percent:"percent"},a=(e,t,i=o.Pixel)=>{const a=c(e),r=s(t,i)/2;return a.left<r?n.GG.Right:a.right<r?n.GG.Left:n.GG.Center},r=e=>e.top>window.innerHeight/2?n._4.Top:n._4.Bottom,s=(e,t)=>t===o.Percent?e:l(null!=e?e:(e=>{const t=document.body.querySelector("kentico-pop-up-container");return t&&t.offsetWidth?t.offsetWidth:e})(e)),c=e=>({left:l(e.left),right:l(window.innerWidth-e.right)}),l=e=>e/window.innerWidth,d=e=>({left:e.left+e.width/2+pageXOffset,top:r(e)===n._4.Top?e.top-10+pageYOffset:e.top+e.height+10+pageYOffset})},4612:function(e,t,i){i.d(t,{_S:function(){return a},Yn:function(){return o},Ex:function(){return s},my:function(){return r}});const n="ktc.pagebuilder.recentwidgets",o=4,a=4,r=()=>{var e;return null!==(e=(e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):void 0})(n))&&void 0!==e?e:[]},s=e=>{const t=r(),i=t.indexOf(e);i>=0&&t.splice(i,1),t.unshift(e),((e,t)=>{localStorage.setItem(e,JSON.stringify(t))})(n,t)}},8628:function(e,t,i){i.d(t,{a:function(){return p},q:function(){return g}});var n=i(3160),o=i.n(n),a=i(2620),r=i(9781),s=i(9560),c=i(280),l=i(4152);let d=!1;const p=(e,t,i,n,r,d)=>(0,a.S)((()=>{if(!e)return;n&&(0,l.O)(),y(e);const a=n?u(e):{},p=(0,s.K)(i,t,a),g=(0,c.D)(p,t,a,r);d&&d(g),new(o())(e,g)})),g=({editor:e})=>{const t=e.querySelector(r.a6);if(t){t["data-froala.editor"].destroy()}},u=e=>{const t=e.dataset.richTextEditorConfiguration,{richTextEditor:i}=window.kentico.pageBuilder,n=i&&i.configurations&&i.configurations[t];return"object"==typeof n?n:{}},y=e=>{if(d)return;const{enableImageRecognition:t,getLinkMetadataEndpointUrl:i,richTextEditorLicense:o,contextMacros:a,getImageDescriptionEndpointUrl:r}=e.dataset,s="true"===t.toLowerCase();Object.assign(n.DEFAULTS,{getLinkMetadataEndpointUrl:i,licenseKey:o,getImageDescriptionEndpointUrl:r,isImageRecognitionEnabled:s},a?{contextMacros:JSON.parse(a)}:{}),d=!0}},9764:function(e,t,i){i.d(t,{R:function(){return g},S:function(){return u}});var n=i(3160),o=i.n(n),a=i(8724),r=i(9781),s=i(8628),c=i(7160);const l=e=>({toolbarInline:!0,charCounterCount:!1,events:{contentChanged(){d(e.editor,e.propertyName,this.html.get())},"commands.after"(e){if("html"===e&&this.codeView.isActive()){const e=this.$oel[0];(null==e?void 0:e.querySelector(".fr-btn.html-switch")).textContent=window.kentico.localization.strings["kentico.components.formcomponent.richtext.applybutton"]}}}}),d=(e,t,i)=>{const n=new CustomEvent("updateProperty",{detail:{name:t,value:(0,c.AZ)(i),refreshMarkup:!1}});e.dispatchEvent(n)};var p=i(4152);const g=()=>{o().MAIL_REGEX=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/;const e=n.DEFAULTS.videoInsertButtons||[];delete e[e.indexOf("videoUpload")],(0,p.k)()},u=e=>{(0,a.Ir)("Kentico.InlineEditor.RichText",{init(t){const i=t.editor.querySelector(r.a6);(0,s.a)(i,l(t),t.propertyValue,!0,e)},destroy(e){(0,s.q)(e)}})}},7160:function(e,t,i){i.d(t,{AZ:function(){return y},e2:function(){return m},mY:function(){return f},ot:function(){return M}});var n=i(8976),o=i.n(n),a=i(3368),r=i.n(a),s=i(8152),c=i(1204),l=i(7828);const d=/<input [^>]*data-macro-type="(query|pattern)[^>]*>/g,p=/data-macro-value="([^"]*)"/,g=/data-macro-default-value="([^"]*)"/,u=/{%\s*ResolveDynamicText\(\s*"(query|pattern)"\s*,\s*"([^"]+)"\s*,\s*"(.*?)"\s*\)\s*%}/g,y=e=>e.replace(d,((e,t)=>`{% ResolveDynamicText("${t}", "${e.match(p)[1]||""}", "${r()(e.match(g)[1]).replace(/"/g,'\\"')}") %}`)),m=(e,t)=>e.replace(u,((e,i,n,a)=>(0,l.uO)(i,n,o()(a.replace(/\\"/g,'"')),(0,c.K)(t,n)))),M=e=>e.replace(u,""),f=e=>{e.el.querySelectorAll(`.${s.Km}`).forEach((t=>{t.onclick=()=>e.kenticoMacroPlugin.showActionsPopup(t),t.onmousedown=e=>{2===e.button&&e.stopPropagation()}}))}},8724:function(e,t,i){i.d(t,{ID:function(){return d},Ir:function(){return s},QB:function(){return p},Qb:function(){return l},Qj:function(){return g}});var n=i(6012),o=i(2632),a=i(655);const r={},s=(e,t)=>{try{c(e,t)}catch(e){return void o.Q.logError(e.message)}r[e]=t},c=(e,t)=>{const i=(0,n.Km)(a.UH.LocalizationService);if("string"!=typeof e){const e=i.getLocalization("inlineeditors.initinvalidname");throw new Error(e)}if("object"!=typeof t){const t=i.getLocalization("inlineeditors.wrongtype",e);throw new Error(t)}if(!t.hasOwnProperty("init")){const t=i.getLocalization("inlineeditors.initmissing",e);throw new Error(t)}if("function"!=typeof t.init){const t=i.getLocalization("inlineeditors.initwrongtype",e);throw new Error(t)}if(r[e]){const t=i.getLocalization("inlineeditors.duplicateregistration",e);throw new Error(t)}},l=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]"),s=(0,n.Km)(a.UH.LocalizationService),c={cultureCode:s.getCultureCode(),getString:s.getLocalizationWithoutPrefix};for(const e of i){const i=e.dataset.inlineEditor,n=r[i];if(!n){const e=s.getLocalization("inlineeditors.notregistered",i);o.Q.logError(e);continue}const a=e.dataset.propertyName;if(a&&a.length)try{n.init({editor:e,propertyName:a,localizationService:c,propertyValue:t[a]})}catch(e){o.Q.logException(e)}else{const e=s.getLocalization("inlineeditors.missingpropertyname",i);o.Q.logError(e)}}},d=e=>{u(e,"dragStart")},p=e=>{u(e,"drop")},g=e=>{u(e,"destroy")},u=(e,t)=>{const i=e.querySelectorAll("[data-inline-editor]");for(const e of i){const i=e.dataset.inlineEditor,n=r[i];if(n.hasOwnProperty(t)){const i=n[t],o={editor:e};i.call(i,o)}}}},844:function(e,t,i){i.d(t,{KE:function(){return f},Kq:function(){return h},OM:function(){return m},cv:function(){return y},kf:function(){return u},m2:function(){return g},sv:function(){return M}});var n=i(9907),o=i.n(n),a=i(4236),r=i(7820),s=i(655),c=i(1396),l=i(7808),d=i(5492);const p=[],g=(e,t=[],i=0)=>(n,o,{localizationService:a})=>{D(e);const{title:r,url:s,data:c,theme:g,width:u,maximized:y,showFooter:m,applyButtonText:M,cancelButtonText:f}=I(e,a);p.push({applyCallback:e.applyCallback,cancelCallback:e.cancelCallback||(()=>null)});n((0,new l.O(T).openModalDialog)({componentIdentifier:`CustomDialog${p.length}`,dialogType:d.S.Custom,dialogTitle:r,dialogMarkupUrl:s,dialogTabs:t,activeTabIndex:i,dialogMarkupModel:c,dialogTheme:g,dialogWidth:u,maximized:y,showFooter:m,applyButtonText:M,cancelButtonText:f}))},u=e=>(t,i)=>{const n=i().modalDialogs.dialogs.length-1;t(c.K2(n,e))},y=(e,t=M)=>async(i,n,{logger:o})=>{try{const o=await p[p.length-1].applyCallback(e);if(o&&!1===o.closeDialog)return;const a=n().modalDialogs.dialogs.length-1;i(t(a)),p.pop()}catch(e){o.logException(e)}},m=(e,t=M)=>async(i,n,{logger:o})=>{try{await p[p.length-1].cancelCallback(e)}catch(e){o.logException(e)}finally{const e=n().modalDialogs.dialogs.length-1;i(t(e)),p.pop()}},M=e=>(t,i,{messaging:n})=>{n.postMessage(s.MX.CLOSE_MODAL_DIALOG,null,"*"),t(c.sv(e))},f=()=>(e,t)=>{const i=t().modalDialogs.dialogs;return i.length<=0||i[i.length-1].type!==d.S.Custom?null:o()(i[i.length-1].model)},D=e=>{if(!e.url||!e.applyCallback)throw new TypeError("Passed options do not have required properties.");if("function"!=typeof e.applyCallback)throw new TypeError("applyCallback is not an instance of a Function type.");if(e.cancelCallback&&"function"!=typeof e.cancelCallback)throw new TypeError("cancelCallback is not an instance of a Function type.");if("string"!=typeof e.url)throw new TypeError("url is not of the type string.");if(e.title&&"string"!=typeof e.title)throw new TypeError("title is not of the type string.");if(e.theme&&-1===Object.values(s.So).indexOf(e.theme))throw new TypeError("theme does not match any of the existing dialog themes.");if(void 0!==e.width&&("string"!=typeof e.width||!e.width.endsWith("px")&&!e.width.endsWith("%")))throw new TypeError("width must be represented by 'XXXpx' or 'XX%' string values.");if(void 0!==e.maximized&&"boolean"!=typeof e.maximized)throw new TypeError("maximized must be of type boolean.");if(void 0!==e.showFooter&&"boolean"!=typeof e.showFooter)throw new TypeError("showFooter must be of type boolean.")},I=(e,t)=>{const i={showFooter:!0,width:"66%",maximized:!1,applyButtonText:t.getLocalization("modaldialog.buttons.apply"),cancelButtonText:t.getLocalization("modaldialog.buttons.cancel")};return r.wd.assignDefined(i,e)},T=e=>({title:e.dialogTitle,markupUrl:e.dialogMarkupUrl,model:e.dialogMarkupModel,theme:e.dialogTheme}),h=(e,t,i)=>async(n,o,{logger:r})=>{try{const o=await(0,a.M)(t,i);n(c.oR(e,o))}catch(e){r.logException(e)}}},2392:function(e,t,i){i.d(t,{_Q:function(){return l},cr:function(){return p},o5:function(){return g}});var n=i(7540),o=i(8700),a=i(1220),r=i(4612),s=i(100),c=i(5312);const l=(e,t,i,n=null,r=null,l=0)=>(p,g)=>{const u=(0,a.kX)(i);let y,m=c.GG.Center,M=c._4.Bottom,f=c.a_.Single,D=0;if([c.HH.AddSection,c.HH.AddWidget].includes(t)){const{metadata:s,editableAreasConfiguration:p,widgetZonesConfiguration:u,zones:I,editableAreas:T}=g(),h=(0,o.c)(t,s,p[n],u[r]);[y,f]=d(h.length+l,t),m=(0,a.Qn)(i,y,a.Oc.Percent),M=(0,a.se)(i),D=t===c.HH.AddWidget?e!==r?I[r].widgets.indexOf(e):0:T[n].sections.indexOf(e)}p((0,s._Q)(e,m,M,t,u,n,r,f,D))},d=(e,t)=>{switch(!0){case e<=5:return[n.cB,c.a_.Single];case e<=12||t===c.HH.AddSection:return[n.uw,c.a_.Double];case e>12:return[n.OC,c.a_.Quadruple]}},p=e=>(t,i)=>{const{editableAreasConfiguration:n,metadata:a,popup:r,widgetZonesConfiguration:c}=i();let l=g(n,c,a,r.areaIdentifier,r.zoneIdentifier);e&&(l=(0,o.A)(l,e)),t((0,s.wP)(l)),t((0,s.cr)(e))},g=(e,t,i,n,a)=>{const s=(0,r.my)();if(!s.length)return[];const l=e[n],d=t[a],p=(0,o.c)(c.HH.AddWidget,i,l,d),g=new Map(p.map((e=>[e.key,e]))),u=s.map((e=>g.get(e))).filter((e=>e));return u.splice(r._S),u}},4212:function(e,t,i){i.d(t,{OQ:function(){return m},Y$:function(){return y},kv:function(){return d}});var n=i(8016),o=i.n(n),a=i(2550),r=i(1332),s=i(3332),c=i(8196),l=i(6636);const d=async(e,t,i)=>{const n=(0,l.Yh)(t.sections[e].zones,t.zones),o=p(n,t);0!==o.length&&await g(o,t,i)},p=(e,t)=>{const i=e=>t.markups.variants[e].isDirty,n=e.reduce(((e,n)=>{const o=t.widgets[n].type,a=t.widgets[n].variants.filter(i);return 0===a.length?e:void 0===e[o]?Object.assign(Object.assign({},e),{[o]:a}):Object.assign(Object.assign({},e),{[o]:[...e[o],...a]})}),{});return Object.entries(n)},g=async(e,t,i)=>{const n=u(e,t),a=await Promise.all(n),r=o()(e,(([e,t])=>t)).reduce(((e,t,i)=>(e[t]=a[i],e)),{});i((0,c.W)(r))},u=(e,t)=>o()(e,(([e,i])=>{const n=t.metadata.widgets[e].markupUrl;return i.map((e=>{const i=t.widgetVariants[e].properties;return r.Yr(n,i)}))})),y=async(e,t,i=null,n=null)=>{const o=e.metadata.sections[t];!0===o.hasProperties&&null===n&&(n=await r.t(o.defaultPropertiesUrl));const c=await r.Yr(o.markupUrl,n),l=(0,s.uq)(c),d={identifier:i||(0,a.c)(),type:t,properties:n,zones:[]},p=(0,s.M5)(l.markup);p.forEach((e=>d.zones.push(e.identifier)));const{markup:g,restrictions:u}=(0,s.c5)(l.markup,d.zones);return{section:d,markup:{markup:g},widgetZones:p,widgetRestrictions:u}},m=(e,t,i,n)=>{const o={source:e.zones.reduce(((e,t)=>(e[t]=n.zones[t].name,e)),{}),target:i.reduce(((e,{identifier:t,name:i})=>(e[t]=i,e)),{})};return(0,l.UR)(M(e.zones,o.source),M(t.zones,o.target),n.zones)},M=(e,t)=>e.map((e=>({identifier:e,name:t[e]})))},6280:function(e,t,i){i.d(t,{od:function(){return l},uw:function(){return p},y0:function(){return d},yS:function(){return g}});var n=i(9576),o=i.n(n),a=i(6636),r=i(7820),s=i(1376),c=i(4212);const l=(e,t,i)=>async(n,o)=>{const{section:a,markup:r,widgetZones:l,widgetRestrictions:d}=await(0,c.Y$)(o(),e);n(s.od(a,t,i,r,l,d))},d=(e,t)=>async(i,n)=>{const l=n(),d=l.sections[e],p=(0,a.Yh)(d.zones,l.zones),g=Object.values(o()(l.widgets,p));if(1===l.editableAreas[t].sections.length){const{section:n,markup:o,widgetZones:a,widgetRestrictions:p}=await(0,c.Y$)(l,l.editableAreasConfiguration[t].defaultSection,e);i(s.cL(d,n,o,r._k.toRecord(a,"identifier"),p,g))}else i(s.y0(d,t,g))},p=(e,t,i,n)=>async(o,a)=>{const r=a();if(await(0,c.kv)(e,r,o),1===r.editableAreas[t].sections.length){const{section:e,markup:i,widgetZones:n,widgetRestrictions:a}=await(0,c.Y$)(r,r.editableAreasConfiguration[t].defaultSection);o(s.od(e,t,0,i,n,a))}o(s.uw(e,t,i,n))},g=(e,t)=>async(i,n,o)=>{try{const o=n(),a=o.sections[e],{section:r,markup:l,widgetZones:d,widgetRestrictions:p}=await(0,c.Y$)(o,a.type,e,t);await(0,c.kv)(e,o,i);const g=(0,c.OQ)(a,r,d,o);i(s.cL(a,r,l,g,p))}catch(e){o.logger.logException(e)}}},5380:function(e,t,i){i.d(t,{sv:function(){return l.sv},Kq:function(){return l.Kq},_Q:function(){return s._Q},iu:function(){return r},cr:function(){return s.cr},yS:function(){return d.yS},M9:function(){return c.M9}});var n=i(1332),o=i(9968),a=i(8196);const r=(e,t)=>async(i,r)=>{const{markups:s,widgets:c,metadata:l,widgetVariants:d,displayedWidgetVariants:p}=r(),g=p[e];if(s.variants[g].isDirty){const t=c[e].type,o=await n.Yr(l.widgets[t].markupUrl,d[g].properties);i((0,a.W)({[g]:o}))}i((0,o.i)(t,e))};var s=i(2392),c=i(9168),l=i(844),d=i(6280)},5312:function(e,t,i){i.d(t,{GG:function(){return n},HH:function(){return a},S2:function(){return s.S},_4:function(){return o},a_:function(){return r}});var n,o,a,r,s=i(5492);!function(e){e.Center="center",e.Left="left",e.Right="right"}(n||(n={})),function(e){e.Top="top",e.Bottom="bottom"}(o||(o={})),function(e){e.AddWidget="addWidget",e.AddSection="addSection",e.ChangeSection="changeSection",e.Personalization="personalization"}(a||(a={})),function(e){e.Single="single",e.Double="double",e.Quadruple="quadruple"}(r||(r={}))},7719:function(e,t,i){i.d(t,{Am:function(){return s},Gw:function(){return o},qt:function(){return r},wb:function(){return a},wp:function(){return l},wx:function(){return c}});var n=i(8980);const o=(0,n.createAction)("widgetSelection/SELECT",(e=>({widgetIdentifier:e})))(),a=(0,n.createAction)("widgetSelection/UNSELECT")(),r=(0,n.createAction)("widgetSelection/FREEZE")(),s=(0,n.createAction)("widgetSelection/THAW")(),c=(0,n.createAction)("widgetSelection/DISABLE_CLICK_AWAY")(),l=(0,n.createAction)("widgetSelection/ENABLE_CLICK_AWAY")()},2958:function(e,t,i){i(8800);var n=i(6012),o=i(7820),a=i(8724),r=(i(5968),i(1e3)),s=i(3640),c=i(2972),l=i(655),d=i(4468),p=i(8360),g=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let y=class extends p.a{constructor(){super("kentico.pagebuilder")}};y=g([(0,d.q)(),u("design:paramtypes",[])],y);var m=i(5620);const M=new m.Oq.Entity("widgetVariants",{},{idAttribute:"identifier"}),f=new m.Oq.Entity("widgets",{variants:[M]},{idAttribute:"identifier"}),D=new m.Oq.Entity("zones",{widgets:[f]},{idAttribute:"identifier"}),I=new m.Oq.Entity("sections",{zones:[D]},{idAttribute:"identifier"}),T={editableAreas:[new m.Oq.Entity("editableAreas",{sections:[I]},{idAttribute:"identifier"})]};var h=i(904);const O={page:T};var w=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let N=class{normalizeConfiguration(e){const t=(0,m.Cs)(e,O).entities,i=o.wd.isEmpty(t)?{editableAreas:{},sections:{},zones:{},widgets:{},widgetVariants:{}}:t;return i.pageTemplate=e.pageTemplate,i}denormalizeConfiguration(e){return(0,m.gH)({page:{editableAreas:Object.keys(e.editableAreas)},pageTemplate:e.pageTemplate},O,e)}normalizeMetadata(e){const t=(0,m.Cs)(e,h.Q).entities;return{widgets:t.widgets||{},sections:t.sections||{},personalizationConditionTypes:t.personalizationConditionTypes||{},pageTemplates:t.pageTemplates||{}}}};N=w([(0,d.q)()],N);var j=i(4980),z=i(3676),b=i(3948);const A=async()=>{var e;const t=(await b.KY.post(b.sT.clipboard.getEndpoint)).data;let i;return t&&(i=null!==(e=JSON.parse(t.data))&&void 0!==e?e:{copiedWidgets:[],copiedSections:[]}),i},S=(e,t)=>{const i={copiedSections:t,copiedWidgets:e},n=b.sT.clipboard.storeEndpoint,o={data:JSON.stringify(i)};return b.KY.post(n,o,{headers:{"Content-Type":"application/json"}})};var E=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let L=class extends j.Y{processIncomingMessage(e,t){return async i=>{await super.processIncomingMessage(e,t)(i),i.data.msg===l.MX.CHANGE_TEMPLATE&&(await(async(e,t)=>{const i=b.sT.pageTemplate.changeTemplateEndpoint,n={[b.sT.constants.editingInstanceHeader]:t};return b.KY.post(i,e,{headers:n})})(i.data.template,i.data.guid),(0,z.postMessage)(l.MX.TEMP_CONFIGURATION_STORED,null,i.origin))}}};L=E([(0,d.q)()],L);const v=new r.q({skipBaseClassChecks:!0});v.bind(l.UH.LocalizationService).to(y),v.bind(l.UH.NormalizerService).to(N),v.bind(l.UH.PageConfigurationService).to(s.M),v.bind(l.UH.PopUpElementsService).to(c.o),v.bind(l.UH.MessagingService).to(L);var k=i(7336),C=i(3296),x=i(1148),Q=i(6356),P=i(844);const U=(e,t,i)=>{const n=1!==t?"multiple":"single";let o;switch(e){case"attachment":o="kentico.components.attachmentselector.dialogtitle";break;case"media":o="kentico.components.mediafileselector.dialogtitle";break;case"page":o="kentico.components.pageselector.dialogtitle"}return i.getLocalizationWithoutPrefix(`${o}.${n}`)};var Y=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const W=e=>{if("object"!=typeof e)throw new TypeError("Attachment selector options parameter must be an object.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.selectedValues&&!Array.isArray(e.selectedValues))throw new TypeError("The 'selectedValues' parameter must be an instance of an Array type.");if(e.maxFilesLimit&&"number"!=typeof e.maxFilesLimit&&e.maxFilesLimit<0)throw new TypeError("The 'maxFilesLimit' parameter must be of type number, greater or equal to 0.");if(e.allowedExtensions&&"string"!=typeof e.allowedExtensions)throw new TypeError("The 'allowedExtensions' parameter must be of type string.")},V=(e,t)=>{const i={title:U("attachment",e.maxFilesLimit||1,t),applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.attachmentselector.dialog.button.apply"),maxFilesLimit:1,selectedValues:[]};return o.wd.assignDefined(i,e)};var F=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const H=["page","media","attachment"],_=({dispatch:e,localizationService:t},i,n)=>{const{activeTabIndex:o,selectedItemsLimit:a,tabs:r}=n,s=r.map((e=>e.dialogTabType));if(s.length>1)e((0,P.m2)(i,r.map((e=>e.dialogTab)),o));else{const n=s[0];"page"===n&&(i=Object.assign(Object.assign({},i),{data:{pages:Object.assign(Object.assign({},i.data.pages),{maximized:!1})},maximized:!1})),e((0,P.m2)(Object.assign(Object.assign({},i),{title:U(n,a,t)})))}},R=({defaultTab:e,selectedItems:t})=>t&&t.type||e,B=async e=>{const t=e.document.querySelector("kentico-attachment-selector-dialog,  kentico-page-selector, kentico-media-files");if(!t)return null;if("getSelectedAttachments"in t){const e=t;return{type:"attachment",items:await e.getSelectedAttachments()}}if((e=>"getSelectedPage"in e)(t)){const e=t;return{type:"page",items:await e.getSelectedPage()}}if((e=>"getSelectedFiles"in e)(t)){const e=t;return{type:"media",items:await e.getSelectedFiles()}}},Z=(e,t,{pageIdentifier:i},n)=>{const{selectedItemsLimit:o,attachmentOptions:a,mediaOptions:r,pageOptions:s,selectedItems:c}=t,l=c&&c.items||[];switch(e){case"attachment":return{allowedExtensions:a&&a.allowedExtensions,maxFilesLimit:o,pageIdentifier:i,selectedValues:n?l.map((e=>e.value)):[]};case"media":return{allowedExtensions:r&&r.allowedExtensions,libraryName:r&&r.libraryName,maxFilesLimit:o,selectedValues:n?l.map((e=>({fileGuid:e.value}))):[]};case"page":return{identifierMode:s&&s.identifierMode?s.identifierMode:"guid",selectedValues:n?l.map((e=>({identifier:e.value}))):[],maximized:!0,maxItemsLimit:o}}},G=e=>{if("object"!=typeof e)throw new TypeError("Page selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.tabs){if(!Array.isArray(e.tabs))throw new TypeError("The 'tabs' parameter must be an instance of an array of Strings.");if(e.tabs.length>H.length)throw new TypeError(`Maximum allowed length of 'tabs' array is restricted to ${H.length}.`);const t=o._k.getUniqueValues(e.tabs);if(t.filter((e=>-1===H.indexOf(e))).length)throw new TypeError(`The 'tabs' parameter elements are restricted to values: ${H.join(", ")}`);if(t.length<e.tabs.length)throw new TypeError("Each tab name is allowed to appear in the 'tabs' array only once")}if(e.defaultTab){if("string"!=typeof e.defaultTab)throw new TypeError("The 'defaultTab' parameter must be a String.");if(e.tabs&&-1===e.tabs.indexOf(e.defaultTab))throw new TypeError("If 'defaultTab' is specified its value must be an element of a set defined by 'tabs' option.")}if(e.selectedItemsLimit&&"number"!=typeof e.selectedItemsLimit)throw new TypeError("The 'selectedItemsLimit' parameter is not of the type Number.");if(e.selectedItems){if("object"!=typeof e.selectedItems||Array.isArray(e.selectedItems))throw new TypeError("The 'selectedItems' parameter must be an instance of an Object.");if("string"!=typeof e.selectedItems.type||-1===H.indexOf(e.selectedItems.type))throw new TypeError(`The 'selectedItems.type' parameter elements are restricted to values: ${H.join(", ")}.`);if(!Array.isArray(e.selectedItems.items))throw new TypeError("The 'selectedItems.items' parameter must be an instance of an Array type.");if(e.selectedItems.items.some((e=>!e.hasOwnProperty("value"))))throw new TypeError("All objects specified in 'selectedItems.items' collection must have a property called 'value'.")}if(e.mediaOptions){if("object"!=typeof e.mediaOptions||Array.isArray(e.mediaOptions))throw new TypeError("The 'mediaOptions' parameter must be an instance of an Object.");if(e.mediaOptions.libraryName&&"string"!=typeof e.mediaOptions.libraryName)throw new TypeError("The 'mediaOptions.libraryName' parameter must be an instance of a String.");if(e.mediaOptions.allowedExtensions&&"string"!=typeof e.mediaOptions.allowedExtensions)throw new TypeError("The 'mediaOptions.allowedExtensions' parameter must be an instance of a String.")}if(e.pageOptions){if("object"!=typeof e.pageOptions||Array.isArray(e.pageOptions))throw new TypeError("The 'pageOptions' parameter must be an instance of an Object.");if(e.pageOptions.rootPath&&"string"!=typeof e.pageOptions.rootPath)throw new TypeError("The 'pageOptions.rootPath' parameter must be an instance of a String.")}if(e.attachmentOptions){if("object"!=typeof e.attachmentOptions||Array.isArray(e.attachmentOptions))throw new TypeError("The 'attachmentOptions' parameter must be an instance of an Object.");if(e.attachmentOptions.allowedExtensions&&"string"!=typeof e.attachmentOptions.allowedExtensions)throw new TypeError("The 'attachmentOptions.allowedExtensions' parameter must be an instance of a String.")}},q=(e,t)=>{const i={title:t.getLocalizationWithoutPrefix("kentico.components.contentselector.dialogtitle"),applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.contentselector.dialog.button.apply"),tabs:H,defaultTab:e.tabs?e.tabs[0]:H[0],selectedItemsLimit:1,maximized:!0};return o.wd.assignDefined(i,e)},$=(e,{attachmentOptions:t,pageOptions:i,mediaOptions:n},o,a)=>{switch(e){case"attachment":let e=o.attachmentSelector;return(null==t?void 0:t.allowedExtensions)&&(e=Q.o(e,"allowedExtensions",encodeURIComponent(t.allowedExtensions))),{iconClassName:"icon-w-document-attachments",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.attachmentstabtitle"),url:e};case"page":return{iconClassName:"icon-w-documents",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.pagestabtitle"),url:(null==i?void 0:i.rootPath)?Q.o(o.pageSelector,"rootPath",i.rootPath):o.pageSelector};case"media":let r=o.mediaFilesSelector;return(null==n?void 0:n.allowedExtensions)&&(r=Q.o(r,"allowedExtensions",encodeURIComponent(n.allowedExtensions))),(null==n?void 0:n.libraryName)&&(r=Q.o(r,"libraryName",encodeURIComponent(n.libraryName))),{iconClassName:"icon-w-media-gallery",title:a.getLocalizationWithoutPrefix("kentico.components.contentselector.mediatabtitle"),url:r}}};var K=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const X=e=>{if(void 0===e)throw new TypeError("Media files selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(e.libraryName&&"string"!=typeof e.libraryName)throw new TypeError("The 'libraryName' parameter is not of the type string.");if(e.maxFilesLimit&&"number"!=typeof e.maxFilesLimit)throw new TypeError("The 'maxFilesLimit' parameter is not of the type number.")};var J=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const ee=e=>{if(void 0===e)throw new TypeError("Page selector needs to have a configuration object defined.");if("function"!=typeof e.applyCallback)throw new TypeError("The 'applyCallback' parameter must be an instance of a Function type.");if(void 0!==e.selectedValues){if(void 0===e.identifierMode)throw new TypeError("The 'selectedValues' parameter can be used only together with the 'identifierMode' specified.");if(!(e.selectedValues instanceof Array))throw new TypeError("The 'selectedValues' parameter must be an array.");if(e.selectedValues.length&&void 0===e.selectedValues[0].identifier)throw new TypeError("The 'selectedValues' parameter must contain objects with an 'identifier' variable specified.");if("guid"!==e.identifierMode&&"path"!==e.identifierMode)throw new TypeError('The \'identifierMode\' parameter must be one of the following values: "guid" or "path"')}if(void 0!==e.rootPath&&e.rootPath.lastIndexOf("/")===e.rootPath.length-1&&e.rootPath.length>1)throw new TypeError("The 'rootPath' cannot end with a slash character unless it points at the site root.")},te=(e,t)=>{const i={title:U("page",1,t),identifierMode:"guid",applyButtonText:t.getLocalizationWithoutPrefix("kentico.components.pageselector.dialog.button.apply"),maximized:!1};return o.wd.assignDefined(i,e)},ie=[({namespace:e,config:t,dispatch:i,localizationService:n})=>{(e.mediaFilesSelector=e.mediaFilesSelector||{}).open=e=>{X(e);const{libraryName:o="",maxFilesLimit:a=1,allowedExtensions:r=null,selectedValues:s=[],applyCallback:c,maximized:l=!0}=e,d=K(e,["libraryName","maxFilesLimit","allowedExtensions","selectedValues","applyCallback","maximized"]);let p=Q.o(t.selectors.dialogEndpoints.mediaFilesSelector,"libraryName",encodeURIComponent(o));r&&(p=Q.o(p,"allowedExtensions",encodeURIComponent(r))),i((0,P.m2)(Object.assign({title:e.title||U("media",a,n),data:{media:{libraryName:o,maxFilesLimit:a,allowedExtensions:r,selectedValues:s}},url:p,applyCallback:async e=>{const t=e.document.querySelector("kentico-media-files"),i=null!==t?await t.getSelectedFiles():[];return c(i)},maximized:l,applyButtonText:n.getLocalizationWithoutPrefix("kentico.components.mediafileselector.dialog.button.apply")},d)))}},({namespace:e,config:t,dispatch:i,localizationService:n})=>{e.pageSelector=e.pageSelector||{},e.pageSelector.open=e=>{ee(e);const o=te(e,n),{identifierMode:a,selectedValues:r,applyCallback:s,rootPath:c}=o,l=J(o,["identifierMode","selectedValues","applyCallback","rootPath"]);let d=t.selectors.dialogEndpoints.pageSelector;void 0!==c&&(d=Q.o(d,"rootPath",c));const p={selectedValues:r,identifierMode:a,maximized:l.maximized,maxItemsLimit:1};i((0,P.m2)(Object.assign({url:d,async applyCallback(e){const t=e.document.querySelector("kentico-page-selector"),i=await t.getSelectedPage();return s(i)},data:{pages:p}},l)))}},({namespace:e,config:t,dispatch:i,localizationService:n})=>{e.attachmentSelector=e.attachmentSelector||{},e.attachmentSelector.open=e=>{W(e);const o=V(e,n),{applyCallback:a,selectedValues:r,maxFilesLimit:s,allowedExtensions:c}=o,l=Y(o,["applyCallback","selectedValues","maxFilesLimit","allowedExtensions"]);let d=t.selectors.dialogEndpoints.attachmentSelector;c&&(d=(0,Q.o)(t.selectors.dialogEndpoints.attachmentSelector,"allowedExtensions",c)),i((0,P.m2)(Object.assign({url:d,data:{attachments:{selectedValues:r.map((e=>e.fileGuid)),pageIdentifier:t.pageIdentifier,maxFilesLimit:s,allowedExtensions:c}},async applyCallback(e){const t=e.document.querySelector("kentico-attachment-selector-dialog"),i=await t.getSelectedAttachments();return a(i)},maximized:!0},l)))}},e=>{const{config:t,namespace:i,localizationService:n}=e;i.contentSelector=i.contentSelector||{},i.contentSelector.open=i=>{G(i);const o=q(i,n),{applyCallback:a,tabs:r,defaultTab:s,selectedItemsLimit:c,attachmentOptions:l,mediaOptions:d,pageOptions:p,selectedItems:g}=o,u=F(o,["applyCallback","tabs","defaultTab","selectedItemsLimit","attachmentOptions","mediaOptions","pageOptions","selectedItems"]),y=R({tabs:r,defaultTab:s,selectedItems:g}),m=r.indexOf(y),M=r.map((e=>({dialogTabType:e,dialogTab:$(e,{attachmentOptions:l,pageOptions:p,mediaOptions:d},t.selectors.dialogEndpoints,n)}))),f=e=>Z(e,{attachmentOptions:l,mediaOptions:d,pageOptions:p,selectedItemsLimit:c,selectedItems:g},t,e===y),D=Object.assign({url:M[m].dialogTab.url,applyCallback:async e=>a(await B(e)),data:{attachments:f("attachment"),pages:f("page"),media:f("media")}},u);_(e,D,{selectedItemsLimit:c,tabs:M,activeTabIndex:m})}}];var ne=i(5312),oe=i(4812),ae=i(9781),re=i(7316),se=i(7540);class ce extends re.i{constructor(e,t,i,n,o,a,r,s,c,l){super(t,i,n,o,se.WO,a,c),this.pageIdentifier=e,this.applicationPath=t,this.configurationEndpoints=i,this.metadataEndpoint=n,this.allowedOrigins=o,this.constants=a,this.featureSet=r,this.pageTemplate=s,this.selectors=c,this.clipboard=l}validate(){if(0===this.pageIdentifier)throw new Error((0,n.Km)(l.UH.LocalizationService).getLocalization("notinitialized"))}getComponentMarkupData(e){return{postedData:e,pageIdentifier:this.pageIdentifier}}}var le=i(9176),de=i(3303),pe=i(1044),ge=i(1316),ue=i(6300),ye=i(2364),me=i(3056),Me=i(8980),fe=i(5208),De=i(676);const Ie=(0,Me.createAction)("widgetVariants/CHANGE_PRIORITY",((e,t)=>({widgetIdentifier:e,variants:t})))(),Te=(0,Me.createAction)("pageTemplates/UPDATE_PROPERTIES",((e,t)=>({identifier:e,properties:t})))(),he=(0,Me.createAction)("clipboard/COPY_WIDGET",(e=>({widgetCopy:e})))(),Oe=(0,Me.createAction)("clipboard/COPY_SECTION",(e=>({sectionCopy:e})))(),we=(0,Me.createAction)("clipboard/PASTE_WIDGET",((e,t,i,n,o,a)=>({widget:e,variants:t,markups:i,zoneIdentifier:n,position:o,variantIndexToSelect:a})))(),Ne=(0,Me.createAction)("clipboard/SET_PASTABLE_WIDGETS",(e=>({pastableWidgets:e})))(),je=(0,Me.createAction)("clipboard/SET_PASTABLE_SECTIONS",(e=>({pastableSections:e})))(),ze=(0,Me.createAction)("clipboard/LOAD",(e=>({copiedObjects:e})))(),be=(0,Me.createAction)("clipboard/DELETE_WIDGET",(e=>({clipboardItemIdentifier:e})))(),Ae=(0,Me.createAction)("clipboard/DELETE_SECTION",(e=>({clipboardItemIdentifier:e})))(),Se=(0,Me.createAction)("clipboard/ADD_RESTRICTED_WIDGETS",(e=>({widgetCopies:e})))(),Ee=(0,Me.createAction)("clipboard/REMOVE_RESTRICTED_WIDGET",(e=>({clipboardEntryIdentifier:e})))(),Le=(0,Me.createAction)("clipboard/SHOW_THUMBNAIL",((e,t,i)=>({clipboardEntryIdentifier:e,top:t,left:i})))(),ve=(0,Me.createAction)("clipboard/HIDE_THUMBNAIL",(e=>({clipboardEntryIdentifier:e})))(),ke={identifier:null,properties:{}};var Ce=i(44),xe=i.n(Ce),Qe=i(7860);var Pe=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const Ue={widgets:{copiedWidgets:[],restrictedWidgets:[],pastableWidgets:[]},sections:{copiedSections:[],pastableSections:[]},thumbnails:{}};var Ye=i(5091);var We=i(9464);const Ve={sections:{},variants:{}};var Fe=i(1724);var He=i(6100);const _e=(0,le.TL)(Object.assign(Object.assign({},me.R),{config:(e=null)=>e,pageTemplate:(e=ke,t)=>t.type===(0,Me.getType)(Te)?Object.assign(Object.assign({},e),{properties:t.payload.properties}):e,widgets:(e,t)=>{switch(e=(0,Qe.s)(e,t),t.type){case(0,Me.getType)(fe.Sk):{const i=e[t.payload.widgetIdentifier];return Object.assign(Object.assign({},e),{[t.payload.widgetIdentifier]:Object.assign(Object.assign({},i),{conditionType:t.payload.conditionType||i.conditionType,variants:[...i.variants,t.payload.variant.identifier]})})}case(0,Me.getType)(Ie):{const{widgetIdentifier:i,variants:n}=t.payload,o=e[i],{variants:a}=o;if(xe()(n,a))return e;if(xe()([...n].sort(),[...a.slice(1)].sort()))return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},o),{variants:[a[0],...n]})});throw new Error("Changing variants priority can only modify their order.")}case(0,Me.getType)(we):return Object.assign(Object.assign({},e),{[t.payload.widget.identifier]:t.payload.widget});default:return e}},highlightedSection:(e,t)=>{switch(e=(0,De.w)(e,t),t.type){case(0,Me.getType)(fe.UH):return t.payload.type!==ne.S2.SectionProperties?e:Object.assign(Object.assign({},e),{highlightBorder:!0,freezeHighlight:!0});case(0,Me.getType)(fe.sv):return e.freezeHighlight?Object.assign(Object.assign({},e),{highlightBorder:!1,freezeHighlight:!1}):e;default:return e}},clipboard:(e=Ue,t)=>{switch(t.type){case(0,Me.getType)(he):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:[t.payload.widgetCopy,...e.widgets.copiedWidgets.slice(0,9)]})});case(0,Me.getType)(Oe):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{copiedSections:[t.payload.sectionCopy,...e.sections.copiedSections.slice(0,9)]})});case(0,Me.getType)(we):return Object.assign(Object.assign({},e),{widgets:Object.assign({},e.widgets),thumbnails:{}});case(0,Me.getType)(Se):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{restrictedWidgets:[...e.widgets.restrictedWidgets,...t.payload.widgetCopies]})});case(0,Me.getType)(Ne):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{pastableWidgets:t.payload.pastableWidgets})});case(0,Me.getType)(je):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{pastableSections:t.payload.pastableSections})});case(0,Me.getType)(ze):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:t.payload.copiedObjects.copiedWidgets}),sections:Object.assign(Object.assign({},e.sections),{copiedSections:t.payload.copiedObjects.copiedSections})});case(0,Me.getType)(be):return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{copiedWidgets:e.widgets.copiedWidgets.filter((e=>e.clipboardItemIdentifier!==t.payload.clipboardItemIdentifier))}),thumbnails:{}});case(0,Me.getType)(Ae):return Object.assign(Object.assign({},e),{sections:Object.assign(Object.assign({},e.sections),{copiedSections:e.sections.copiedSections.filter((e=>e.clipboardItemIdentifier!==t.payload.clipboardItemIdentifier))}),thumbnails:{}});case(0,Me.getType)(Ee):const{clipboardEntryIdentifier:i}=t.payload;return Object.assign(Object.assign({},e),{widgets:Object.assign(Object.assign({},e.widgets),{restrictedWidgets:e.widgets.restrictedWidgets.filter((e=>e.clipboardItemIdentifier!==i))})});case(0,Me.getType)(Le):return Object.assign(Object.assign({},e),{thumbnails:Object.assign(Object.assign({},e.thumbnails),{[t.payload.clipboardEntryIdentifier]:{top:t.payload.top,left:t.payload.left}})});case(0,Me.getType)(ve):const n=e.thumbnails,o=t.payload.clipboardEntryIdentifier,a=(n[o],Pe(n,["symbol"==typeof o?o:o+""]));return Object.assign(Object.assign({},e),{thumbnails:a});default:return e}},widgetVariants:(e={},t)=>(e=(0,Ye.R)(e,t),t.type===(0,Me.getType)(we)?Object.assign(Object.assign({},e),t.payload.variants.reduce(((e,t)=>(e[t.identifier]=t,e)),{})):e),markups:(e=Ve,t)=>(e=(0,We.C)(e,t),t.type===(0,Me.getType)(we)?Object.assign(Object.assign({},e),{variants:Object.assign(Object.assign({},e.variants),t.payload.variants.reduce(((e,i,n)=>(e[i.identifier]={markup:t.payload.markups[n],isDirty:!1},e)),{}))}):e),zones:(e={},t)=>{if(e=(0,Fe.E)(e,t),t.type===(0,Me.getType)(we)){const{widget:i,zoneIdentifier:n,position:a}=t.payload;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({},e[n]),{widgets:o._k.insertItemIntoArray(e[n].widgets,i.identifier,a)})})}return e},displayedWidgetVariants:(e={},t)=>{if(e=(0,He.g)(e,t),t.type===(0,Me.getType)(we)){const{widget:i,variants:n,variantIndexToSelect:o}=t.payload;return Object.assign(Object.assign({},e),{[i.identifier]:n[o].identifier})}return e}})),Re=(e,t)=>{const i=(0,ge.m)(t);return(0,le.eC)(_e,e,i((0,le.d4)(de.c.withExtraArgument((0,pe.w)()),ye.m,ue.g)))};var Be=i(1284),Ze=i(3316),Ge=i(7433),qe=i(9576),$e=i.n(qe),Ke=i(6280),Xe=i(4212),Je=i(6588),et=i(2550),tt=i(1332),it=i(9972),nt=i(7780),ot=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};const at=e=>async(t,i)=>{const n=ft([e],i()),o=t(dt()),[a]=await Promise.all([n,o]),r=a[0];t(he(r)),await t(st(it.s.Widget,r.widgetType))},rt=e=>async(t,i)=>{const n=i(),o=await It(e,n);await t(dt()),t(Oe(o)),await t(st(it.s.Section,o.sectionType))},st=(e,t)=>async(i,n,{localizationService:o,logger:a,messaging:r})=>{const{clipboard:s,metadata:c}=n(),d=e===it.s.Widget,p=d?c.widgets[t].name:c.sections[t].name,g=d?"clipboard.widgets.copysuccessmessage":"clipboard.sections.copysuccessmessage";try{if(200===(await S(s.widgets.copiedWidgets,s.sections.copiedSections)).status){const e=o.getLocalization(g,p);r.postMessage(l.MX.MESSAGING_SUCCESS,e,"*")}}catch(e){a.logException(e)}},ct=e=>async(t,i,{logger:n})=>{const{clipboard:o}=i(),a=o.widgets.copiedWidgets.find((t=>t.clipboardItemIdentifier===e));a?await t(mt(a)):n.logError("Widget could not be found in the clipboard.")},lt=e=>async(t,i,{logger:n})=>{const{clipboard:o}=i(),a=o.sections.copiedSections.find((t=>t.clipboardItemIdentifier===e));a?(await t(Mt(a)),t((0,fe.Sq)())):n.logError("Section could not be found in the clipboard.")},dt=()=>async(e,t,{logger:i})=>{try{const t=await A();return e(ze(t)),t}catch(e){i.logException(e)}},pt=e=>async(t,i,{logger:n,localizationService:a,messaging:r})=>{try{const s=await A(),c=s.copiedSections,d=c.findIndex((t=>t.clipboardItemIdentifier===e));if(-1===d)return void n.logError("Section does not exists in the clipboard.");const p=o._k.removeItem(c,d),g=await S(s.copiedWidgets,p),{metadata:u}=i(),{name:y}=u.sections[c[d].sectionType];if(200===g.status){t(Ae(e));const i=a.getLocalization("clipboard.section.removesucessmessage",y);r.postMessage(l.MX.MESSAGING_SUCCESS,i,"*")}}catch(e){n.logException(e)}},gt=e=>async(t,i,{logger:n,localizationService:a,messaging:r})=>{try{const s=await A(),c=s.copiedWidgets,d=c.findIndex((t=>t.clipboardItemIdentifier===e));if(-1===d)return void n.logError("Widget does not exists in the clipboard.");const{metadata:p}=i(),{name:g}=p.widgets[c[d].widgetType],u=o._k.removeItem(c,d);if(200===(await S(u,s.copiedSections)).status){t(be(e));const i=a.getLocalization("clipboard.widgets.removesucessmessage",g);r.postMessage(l.MX.MESSAGING_SUCCESS,i,"*")}}catch(e){n.logException(e)}},ut=e=>(t,i,{messaging:n})=>{const{clipboard:o}=i();1===o.widgets.restrictedWidgets.length&&n.postMessage(l.MX.SET_RESTRICTED_WIDGETS,!1,"*"),t(Ee(e))},yt=e=>async(t,i)=>{const{clipboard:n}=i(),o=n.widgets.restrictedWidgets.find((t=>t.clipboardItemIdentifier===e));await t(mt(o)),t(ut(e))},mt=e=>async(t,i,{logger:n})=>{const{clipboard:o,popup:a,metadata:r}=i(),{widgetType:s}=e;if(!o.widgets.pastableWidgets.includes(s))return void n.logError(`Widget cannot be pasted to area '${a.areaIdentifier}'.`);t((0,fe.Sq)());const c=a.componentIdentifier===a.zoneIdentifier?a.index:a.index+1,{widget:l,variants:d,markups:p,displayedVariantIndex:g}=await Tt(e,r.widgets[s].markupUrl);t(we(l,d,p,a.zoneIdentifier,c,g))},Mt=e=>async(t,i)=>{const{popup:n,metadata:o}=i(),{sectionType:a,properties:r,zones:s}=e,c=n.index+1,{section:l,markup:d,widgetZones:p,widgetRestrictions:g}=await(0,Xe.Y$)(i(),a,null,r);t((0,fe.od)(l,n.areaIdentifier,c,d,p,g));const u=s.map((async(e,i)=>{for(const[n,a]of e.entries()){const{widget:e,variants:r,markups:s,displayedVariantIndex:c}=await Tt(a,o.widgets[a.widgetType].markupUrl);t(we(e,r,s,l.zones[i],n,c))}}));await Promise.all(u)},ft=async(e,t)=>{const i=Dt(e,t),n=await Promise.all(e.map((e=>{const t=document.getElementById(e).querySelector(".ktc-widget-body-wrapper");return ht(t)})));return i.map(((e,t)=>Object.assign({clipboardItemIdentifier:(0,et.c)(),thumbnail:n[t]},e)))},Dt=(e,t)=>{const{widgets:i,widgetVariants:n,displayedWidgetVariants:o}=t;return e.map((e=>{const{type:t,variants:a,conditionType:r}=i[e],s=a.map((e=>{const t=n[e],{identifier:i}=t;return ot(t,["identifier"])})),c=o[e];return{widgetType:t,conditionType:null!=r?r:null,displayedVariantIndex:a.findIndex((e=>n[e].identifier===c)),variants:s}}))},It=async(e,t)=>{const{sections:i,zones:n}=t,o=i[e],a=document.getElementById(e).querySelector(".ktc-section-body-wrapper"),r=await ht(a),s=o.zones.map((e=>{const i=n[e].widgets;return Dt(i,t)}));return{clipboardItemIdentifier:(0,et.c)(),sectionType:o.type,zones:s,properties:o.properties,thumbnail:r}},Tt=async(e,t)=>{const{widgetType:i,conditionType:n,variants:o,displayedVariantIndex:a}=e,r=o.map((e=>Object.assign({identifier:(0,et.c)()},e)));return{widget:{identifier:(0,et.c)(),type:i,conditionType:n,variants:[...r.map((e=>e.identifier))]},markups:await Promise.all(o.map((e=>tt.Yr(t,e.properties)))),variants:r,displayedVariantIndex:a}},ht=async e=>{const{width:t,height:i}=e.getBoundingClientRect(),n=((e,t)=>{const i=Math.max(e,t);return i<=200?1:200/i})(t,i);try{return await(0,Je.aY)(e,{filter:e=>{var t;return!((null===(t=e.tagName)||void 0===t?void 0:t.startsWith("KENTICO-"))||e.shadowRoot)},backgroundColor:"#fff",pixelRatio:n})}catch(e){return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEzNiIgdmlld0JveD0iMCAwIDEyMCAxMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjAiIGhlaWdodD0iMTM2IiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2IDQxQzU2IDQzLjIwOTEgNTQuMjA5MSA0NSA1MiA0NUM0OS43OTA5IDQ1IDQ4IDQzLjIwOTEgNDggNDFDNDggMzguNzkwOSA0OS43OTA5IDM3IDUyIDM3QzU0LjIwOTEgMzcgNTYgMzguNzkwOSA1NiA0MVpNNTQgNDFDNTQgNDIuMTA0NiA1My4xMDQ2IDQzIDUyIDQzQzUwLjg5NTQgNDMgNTAgNDIuMTA0NiA1MCA0MUM1MCAzOS44OTU0IDUwLjg5NTQgMzkgNTIgMzlDNTMuMTA0NiAzOSA1NCAzOS44OTU0IDU0IDQxWiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQ0IDU2VjM4QzQ0IDM1LjIzODYgNDYuMjM4NiAzMyA0OSAzM0g2N0M2OS43NjE0IDMzIDcyIDM1LjIzODYgNzIgMzhWNDguOTk5TDcyIDQ5LjAwNkM3MS45OTkyIDQ5LjEzOTQgNzEuOTcyMyA0OS4yNjY2IDcxLjkyNDEgNDkuMzgyOEM3MS44NzUzIDQ5LjUwMDcgNzEuODAzIDQ5LjYxMTIgNzEuNzA3MSA0OS43MDcxQzcxLjUyNjEgNDkuODg4MSA3MS4yNzYxIDUwIDcxIDUwQzcwLjg2NDQgNTAgNzAuNzM1MSA0OS45NzMgNzAuNjE3MiA0OS45MjQxQzcwLjQ5OTMgNDkuODc1MyA3MC4zODg4IDQ5LjgwMyA3MC4yOTI5IDQ5LjcwNzFMNjYgNDUuNDE0Mkw1Ny44NDg1IDUzLjU2NTdDNTcuMzc5OSA1NC4wMzQzIDU2LjYyMDEgNTQuMDM0MyA1Ni4xNTE1IDUzLjU2NTdMNTIgNDkuNDE0Mkw0NiA1NS40MTQyVjU2QzQ2IDU3LjY1NjkgNDcuMzQzMSA1OSA0OSA1OUg2MEM2MC41NTIzIDU5IDYxIDU5LjQ0NzcgNjEgNjBDNjEgNjAuNTUyMyA2MC41NTIzIDYxIDYwIDYxSDQ5QzQ2LjIzODYgNjEgNDQgNTguNzYxNCA0NCA1NlpNNDkgMzVDNDcuMzQzMSAzNSA0NiAzNi4zNDMxIDQ2IDM4VjUyLjU4NThMNTEuMTUxNSA0Ny40MzQzQzUxLjYyMDEgNDYuOTY1NyA1Mi4zNzk5IDQ2Ljk2NTcgNTIuODQ4NSA0Ny40MzQzTDU3IDUxLjU4NThMNjUuMTUxNSA0My40MzQzQzY1LjYyMDEgNDIuOTY1NyA2Ni4zNzk5IDQyLjk2NTcgNjYuODQ4NSA0My40MzQzTDcwIDQ2LjU4NThWMzhDNzAgMzYuMzQzMSA2OC42NTY5IDM1IDY3IDM1SDQ5WiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTY5IDY1QzcyLjg2NiA2NSA3NiA2MS44NjYgNzYgNThDNzYgNTQuMTM0IDcyLjg2NiA1MSA2OSA1MUM2NS4xMzQgNTEgNjIgNTQuMTM0IDYyIDU4QzYyIDYxLjg2NiA2NS4xMzQgNjUgNjkgNjVaTTczLjAzMzYgNjAuOTU1MkM3My42NDEyIDYwLjEyNzMgNzQgNTkuMTA1NiA3NCA1OEM3NCA1NS4yMzg2IDcxLjc2MTQgNTMgNjkgNTNDNjcuODk0NCA1MyA2Ni44NzI3IDUzLjM1ODggNjYuMDQ0OCA1My45NjY0TDczLjAzMzYgNjAuOTU1MlpNNzEuNTUxMSA2Mi4zMDExQzcwLjgwNDIgNjIuNzQ1MSA2OS45MzE5IDYzIDY5IDYzQzY2LjIzODYgNjMgNjQgNjAuNzYxNCA2NCA1OEM2NCA1Ny4wNjgxIDY0LjI1NDkgNTYuMTk1OCA2NC42OTg5IDU1LjQ0ODlMNzEuNTUxMSA2Mi4zMDExWiIgZmlsbD0iIzE1MTUxNSIvPgo8cGF0aCBkPSJNMjMuNDI0OCA4OFY3OS42SDI0LjU4ODhMMjguMzY4OCA4Ni4xNzZWNzkuNkgyOS40MTI4Vjg4SDI4LjI2MDhMMjQuNDY4OCA4MS40MjRWODhIMjMuNDI0OFpNMzMuNzExIDg4LjE0NEMzMS45MTEgODguMTQ0IDMwLjgzMSA4Ni44NDggMzAuODMxIDg1LjI0QzMwLjgzMSA4My42MiAzMS45MTEgODIuMzI0IDMzLjcxMSA4Mi4zMjRDMzUuNDk5IDgyLjMyNCAzNi41OTEgODMuNjIgMzYuNTkxIDg1LjI0QzM2LjU5MSA4Ni44NDggMzUuNDk5IDg4LjE0NCAzMy43MTEgODguMTQ0Wk0zMy43MTEgODcuMjA4QzM0Ljg3NSA4Ny4yMDggMzUuNTQ3IDg2LjM0NCAzNS41NDcgODUuMjRDMzUuNTQ3IDg0LjEyNCAzNC44NzUgODMuMjYgMzMuNzExIDgzLjI2QzMyLjU0NyA4My4yNiAzMS44NjMgODQuMTI0IDMxLjg2MyA4NS4yNEMzMS44NjMgODYuMzQ0IDMyLjU0NyA4Ny4yMDggMzMuNzExIDg3LjIwOFpNNDMuMjgyNCA4Ny4xMzZDNDMuNDg2NCA4Ny4xMzYgNDMuODIyNCA4Ny4xIDQzLjk3ODQgODcuMDY0Vjg3Ljk4OEM0My43NzQ0IDg4LjAzNiA0My40MDI0IDg4LjA3MiA0My4wNDI0IDg4LjA3MkM0Mi4zOTQ0IDg4LjA3MiA0MS4zNTA0IDg3Ljk1MiA0MS4zNTA0IDg2LjE2NFY4My4zNDRINDAuMzU0NFY4Mi40NjhINDEuMzUwNFY4MC43MTZINDIuMzk0NFY4Mi40NjhINDMuNzg2NFY4My4zNDRINDIuMzk0NFY4NS45MzZDNDIuMzk0NCA4Ni45OTIgNDIuNzU0NCA4Ny4xMzYgNDMuMjgyNCA4Ny4xMzZaTTQ4LjIzMTggODIuMzI0QzQ5LjU5OTggODIuMzI0IDUwLjI5NTggODMuMTE2IDUwLjI5NTggODQuNTkyVjg4SDQ5LjI1MThWODUuMDQ4QzQ5LjI1MTggODMuODEyIDQ4Ljg1NTggODMuMjI0IDQ3Ljg1OTggODMuMjI0QzQ2LjgyNzggODMuMjI0IDQ2LjI5OTggODMuOTU2IDQ2LjI5OTggODUuMDcyVjg4SDQ1LjI1NThWNzkuNkg0Ni4yOTk4VjgzLjQ4OEM0Ni41OTk4IDgyLjc4IDQ3LjI3MTggODIuMzI0IDQ4LjIzMTggODIuMzI0Wk01NC4wODA2IDg4LjE0NEM1Mi44NDQ2IDg4LjE0NCA1MS45ODA2IDg3LjQgNTEuOTgwNiA4NS44NzZWODIuNDY4SDUzLjAyNDZWODUuNjM2QzUzLjAyNDYgODYuNjA4IDUzLjM4NDYgODcuMjQ0IDU0LjM2ODYgODcuMjQ0QzU1LjUwODYgODcuMjQ0IDU1Ljk0MDYgODYuMzggNTUuOTQwNiA4NS40OTJWODIuNDY4SDU2Ljk4NDZWODhINTUuOTQwNlY4Ni45OTJDNTUuNjQwNiA4Ny42NzYgNTQuOTkyNiA4OC4xNDQgNTQuMDgwNiA4OC4xNDRaTTU4Ljc3ODkgODhWODIuNDY4SDU5LjgyMjlWODMuNDc2QzYwLjAyNjkgODIuODc2IDYwLjU5MDkgODIuMzI0IDYxLjQ3ODkgODIuMzI0QzYyLjQ1MDkgODIuMzI0IDYzLjAzODkgODIuNzggNjMuMjQyOSA4My41MTJDNjMuNDgyOSA4Mi44NTIgNjQuMTY2OSA4Mi4zMjQgNjUuMDMwOSA4Mi4zMjRDNjYuNTE4OSA4Mi4zMjQgNjcuMDIyOSA4My4yODQgNjcuMDIyOSA4NC40OTZWODhINjUuOTc4OVY4NC43QzY1Ljk3ODkgODMuNjU2IDY1LjUyMjkgODMuMjI0IDY0Ljc3ODkgODMuMjI0QzYzLjk2MjkgODMuMjI0IDYzLjQyMjkgODMuNzc2IDYzLjQyMjkgODUuMTJWODhINjIuMzc4OVY4NC43ODRDNjIuMzc4OSA4My41ODQgNjEuODYyOSA4My4yMjQgNjEuMTkwOSA4My4yMjRDNjAuMzM4OSA4My4yMjQgNTkuODIyOSA4My44MjQgNTkuODIyOSA4NS4xMlY4OEg1OC43Nzg5Wk03MS44MzUzIDgyLjMyNEM3My40MTkzIDgyLjMyNCA3NC41MTEzIDgzLjUxMiA3NC41MTEzIDg1LjI0Qzc0LjUxMTMgODYuOTMyIDczLjM3MTMgODguMTQ0IDcxLjc3NTMgODguMTQ0QzcwLjkyMzMgODguMTQ0IDcwLjE1NTMgODcuNzEyIDY5Ljc5NTMgODcuMDI4Vjg4SDY4Ljc2MzNWNzkuNkg2OS43OTUzVjgzLjQ1MkM3MC4xNTUzIDgyLjc1NiA3MC45NDczIDgyLjMyNCA3MS44MzUzIDgyLjMyNFpNNzEuNjMxMyA4Ny4yMDhDNzIuNjk5MyA4Ny4yMDggNzMuNDY3MyA4Ni4zOTIgNzMuNDY3MyA4NS4yNEM3My40NjczIDg0LjA4OCA3Mi42OTkzIDgzLjI2IDcxLjYzMTMgODMuMjZDNzAuNTI3MyA4My4yNiA2OS43NDczIDg0LjA3NiA2OS43NDczIDg1LjI0QzY5Ljc0NzMgODYuMzkyIDcwLjUyNzMgODcuMjA4IDcxLjYzMTMgODcuMjA4Wk03NS44NTMxIDg4VjgyLjQ2OEg3Ni44OTcxVjgzLjQ4OEM3Ny4xOTcxIDgyLjc4IDc3Ljg2OTEgODIuMzI0IDc4LjgyOTEgODIuMzI0QzgwLjE4NTEgODIuMzI0IDgwLjg4MTEgODMuMTE2IDgwLjg4MTEgODQuNTkyVjg4SDc5Ljg0OTFWODUuMDQ4Qzc5Ljg0OTEgODMuODEyIDc5LjQ0MTEgODMuMjI0IDc4LjQ1NzEgODMuMjI0Qzc3LjQyNTEgODMuMjI0IDc2Ljg5NzEgODMuOTU2IDc2Ljg5NzEgODUuMDcyVjg4SDc1Ljg1MzFaTTg0LjkxODYgODguMTQ0QzgzLjE1NDYgODguMTQ0IDgyLjE4MjYgODYuODcyIDgyLjE4MjYgODUuMjRDODIuMTgyNiA4My42MDggODMuMjI2NiA4Mi4zMjQgODQuOTQyNiA4Mi4zMjRDODUuODE4NiA4Mi4zMjQgODYuNTM4NiA4Mi43NjggODYuODg2NiA4My40NTJWODIuNDY4SDg3LjkxODZWODhIODYuODg2NlY4Ny4wMjhDODYuNTM4NiA4Ny43MTIgODUuNzQ2NiA4OC4xNDQgODQuOTE4NiA4OC4xNDRaTTg1LjA2MjYgODcuMjA4Qzg2LjI3NDYgODcuMjA4IDg2LjkzNDYgODYuMzA4IDg2LjkzNDYgODUuMjRDODYuOTM0NiA4NC4xNzIgODYuMjc0NiA4My4yNiA4NS4wNjI2IDgzLjI2QzgzLjkyMjYgODMuMjYgODMuMjE0NiA4NC4xIDgzLjIxNDYgODUuMjRDODMuMjE0NiA4Ni4zNjggODMuOTIyNiA4Ny4yMDggODUuMDYyNiA4Ny4yMDhaTTkwLjIzMjQgODEuNTJDODkuNzI4NCA4MS41MiA4OS4zODA0IDgxLjE0OCA4OS4zODA0IDgwLjY4Qzg5LjM4MDQgODAuMjEyIDg5LjcyODQgNzkuODI4IDkwLjIzMjQgNzkuODI4QzkwLjcyNDQgNzkuODI4IDkxLjA3MjQgODAuMjEyIDkxLjA3MjQgODAuNjhDOTEuMDcyNCA4MS4xNDggOTAuNzI0NCA4MS41MiA5MC4yMzI0IDgxLjUyWk04OS43MTY0IDg4VjgyLjQ2OEg5MC43NDg0Vjg4SDg5LjcxNjRaTTkyLjU1MjMgODhWNzkuNkg5My41OTYzVjg4SDkyLjU1MjNaTTM4Ljc4MTggMTAxLjE0NEMzNy4wMTc4IDEwMS4xNDQgMzYuMDQ1OCA5OS44NzIgMzYuMDQ1OCA5OC4yNEMzNi4wNDU4IDk2LjYwOCAzNy4wODk4IDk1LjMyNCAzOC44MDU4IDk1LjMyNEMzOS42ODE4IDk1LjMyNCA0MC40MDE4IDk1Ljc2OCA0MC43NDk4IDk2LjQ1MlY5NS40NjhINDEuNzgxOFYxMDFINDAuNzQ5OFYxMDAuMDI4QzQwLjQwMTggMTAwLjcxMiAzOS42MDk4IDEwMS4xNDQgMzguNzgxOCAxMDEuMTQ0Wk0zOC45MjU4IDEwMC4yMDhDNDAuMTM3OCAxMDAuMjA4IDQwLjc5NzggOTkuMzA4IDQwLjc5NzggOTguMjRDNDAuNzk3OCA5Ny4xNzIgNDAuMTM3OCA5Ni4yNiAzOC45MjU4IDk2LjI2QzM3Ljc4NTggOTYuMjYgMzcuMDc3OCA5Ny4xIDM3LjA3NzggOTguMjRDMzcuMDc3OCA5OS4zNjggMzcuNzg1OCAxMDAuMjA4IDM4LjkyNTggMTAwLjIwOFpNNDUuMTUxNyAxMDFMNDIuNzE1NyA5NS40NjhINDMuODMxN0w0NS41NzE3IDk5LjYwOEw0Ny4zMjM3IDk1LjQ2OEg0OC40Mzk3TDQ2LjAwMzcgMTAxSDQ1LjE1MTdaTTUxLjU0MzYgMTAxLjE0NEM0OS43Nzk2IDEwMS4xNDQgNDguODA3NiA5OS44NzIgNDguODA3NiA5OC4yNEM0OC44MDc2IDk2LjYwOCA0OS44NTE2IDk1LjMyNCA1MS41Njc2IDk1LjMyNEM1Mi40NDM2IDk1LjMyNCA1My4xNjM2IDk1Ljc2OCA1My41MTE2IDk2LjQ1MlY5NS40NjhINTQuNTQzNlYxMDFINTMuNTExNlYxMDAuMDI4QzUzLjE2MzYgMTAwLjcxMiA1Mi4zNzE2IDEwMS4xNDQgNTEuNTQzNiAxMDEuMTQ0Wk01MS42ODc2IDEwMC4yMDhDNTIuODk5NiAxMDAuMjA4IDUzLjU1OTYgOTkuMzA4IDUzLjU1OTYgOTguMjRDNTMuNTU5NiA5Ny4xNzIgNTIuODk5NiA5Ni4yNiA1MS42ODc2IDk2LjI2QzUwLjU0NzYgOTYuMjYgNDkuODM5NiA5Ny4xIDQ5LjgzOTYgOTguMjRDNDkuODM5NiA5OS4zNjggNTAuNTQ3NiAxMDAuMjA4IDUxLjY4NzYgMTAwLjIwOFpNNTYuODU3NCA5NC41MkM1Ni4zNTM0IDk0LjUyIDU2LjAwNTQgOTQuMTQ4IDU2LjAwNTQgOTMuNjhDNTYuMDA1NCA5My4yMTIgNTYuMzUzNCA5Mi44MjggNTYuODU3NCA5Mi44MjhDNTcuMzQ5NCA5Mi44MjggNTcuNjk3NCA5My4yMTIgNTcuNjk3NCA5My42OEM1Ny42OTc0IDk0LjE0OCA1Ny4zNDk0IDk0LjUyIDU2Ljg1NzQgOTQuNTJaTTU2LjM0MTQgMTAxVjk1LjQ2OEg1Ny4zNzM0VjEwMUg1Ni4zNDE0Wk01OS4xNzczIDEwMVY5Mi42SDYwLjIyMTNWMTAxSDU5LjE3NzNaTTY0LjMxNyAxMDEuMTQ0QzYyLjU1MyAxMDEuMTQ0IDYxLjU4MSA5OS44NzIgNjEuNTgxIDk4LjI0QzYxLjU4MSA5Ni42MDggNjIuNjI1IDk1LjMyNCA2NC4zNDEgOTUuMzI0QzY1LjIxNyA5NS4zMjQgNjUuOTM3IDk1Ljc2OCA2Ni4yODUgOTYuNDUyVjk1LjQ2OEg2Ny4zMTdWMTAxSDY2LjI4NVYxMDAuMDI4QzY1LjkzNyAxMDAuNzEyIDY1LjE0NSAxMDEuMTQ0IDY0LjMxNyAxMDEuMTQ0Wk02NC40NjEgMTAwLjIwOEM2NS42NzMgMTAwLjIwOCA2Ni4zMzMgOTkuMzA4IDY2LjMzMyA5OC4yNEM2Ni4zMzMgOTcuMTcyIDY1LjY3MyA5Ni4yNiA2NC40NjEgOTYuMjZDNjMuMzIxIDk2LjI2IDYyLjYxMyA5Ny4xIDYyLjYxMyA5OC4yNEM2Mi42MTMgOTkuMzY4IDYzLjMyMSAxMDAuMjA4IDY0LjQ2MSAxMDAuMjA4Wk03Mi4xODY4IDk1LjMyNEM3My43NzA4IDk1LjMyNCA3NC44NjI4IDk2LjUxMiA3NC44NjI4IDk4LjI0Qzc0Ljg2MjggOTkuOTMyIDczLjcyMjggMTAxLjE0NCA3Mi4xMjY4IDEwMS4xNDRDNzEuMjc0OCAxMDEuMTQ0IDcwLjUwNjggMTAwLjcxMiA3MC4xNDY4IDEwMC4wMjhWMTAxSDY5LjExNDhWOTIuNkg3MC4xNDY4Vjk2LjQ1MkM3MC41MDY4IDk1Ljc1NiA3MS4yOTg4IDk1LjMyNCA3Mi4xODY4IDk1LjMyNFpNNzEuOTgyOCAxMDAuMjA4QzczLjA1MDggMTAwLjIwOCA3My44MTg4IDk5LjM5MiA3My44MTg4IDk4LjI0QzczLjgxODggOTcuMDg4IDczLjA1MDggOTYuMjYgNzEuOTgyOCA5Ni4yNkM3MC44Nzg4IDk2LjI2IDcwLjA5ODggOTcuMDc2IDcwLjA5ODggOTguMjRDNzAuMDk4OCA5OS4zOTIgNzAuODc4OCAxMDAuMjA4IDcxLjk4MjggMTAwLjIwOFpNNzYuMjA0NyAxMDFWOTIuNkg3Ny4yNDg3VjEwMUg3Ni4yMDQ3Wk04My45NDgzIDk3LjkyOEM4My45NDgzIDk4LjEzMiA4My45NDgzIDk4LjI4OCA4My45MjQzIDk4LjU0SDc5LjY0MDNDNzkuNjY0MyA5OS42MDggODAuMzI0MyAxMDAuMjMyIDgxLjM4MDMgMTAwLjIzMkM4Mi4xMTIzIDEwMC4yMzIgODIuNjE2MyA5OS45NDQgODIuODQ0MyA5OS40MTZIODMuODg4M0M4My42OTYzIDEwMC40MzYgODIuNjc2MyAxMDEuMTQ0IDgxLjM4MDMgMTAxLjE0NEM3OS42NzYzIDEwMS4xNDQgNzguNjA4MyAxMDAuMDE2IDc4LjYwODMgOTguMjI4Qzc4LjYwODMgOTYuNDc2IDc5LjY4ODMgOTUuMzI0IDgxLjMzMjMgOTUuMzI0QzgyLjg5MjMgOTUuMzI0IDgzLjk0ODMgOTYuNDA0IDgzLjk0ODMgOTcuOTI4Wk03OS42NDAzIDk3LjczNkg4Mi45MjgzQzgyLjkyODMgOTYuNzY0IDgyLjMyODMgOTYuMTY0IDgxLjMyMDMgOTYuMTY0QzgwLjMxMjMgOTYuMTY0IDc5LjY4ODMgOTYuOCA3OS42NDAzIDk3LjczNloiIGZpbGw9IiMxNTE1MTUiLz4KPC9zdmc+Cg=="}},Ot=(e,t)=>{const i=e.flatMap((e=>e)).flatMap((e=>e.widgetType)).filter((e=>!(0,nt.gT)(t,e)));return i.length>0},wt=(e,t,i)=>async(n,o,a)=>{try{await Ke.od(e,t,i)(n,o,a)}catch(e){a.logger.logException(e)}},Nt=(e,t)=>async(i,n,o)=>{try{await Ke.y0(e,t)(i,n,o)}catch(e){o.logger.logException(e)}},jt=(e,t)=>async(i,n,o)=>{try{const o=n(),a=o.sections[e],{section:r,markup:s,widgetZones:c,widgetRestrictions:d}=await(0,Xe.Y$)(o,t);await(0,Xe.kv)(e,o,i);let p=(0,Xe.OQ)(a,r,c,o);const g=[];Object.keys(d).forEach((e=>{const t=d[e].widgetRestrictions;if(t){const i=Object.values($e()(o.widgets,p[e].widgets)),n=i.filter((e=>!t.includes(e.type))),a=i.filter((e=>t.includes(e.type)));i.length!==a.length&&(g.push(...n),p=Object.assign(Object.assign({},p),{[e]:Object.assign(Object.assign({},p[e]),{widgets:a.map((e=>e.identifier))})}))}}));const u=new Promise((e=>{g.length?(i(fe.ol()),requestAnimationFrame((()=>{requestAnimationFrame((async()=>{var t;await i((t=g.map((e=>e.identifier)),async(e,i,{localizationService:n,messaging:o})=>{if(!t.length)return;const a=i(),r=await ft(t,a);e(Se(r));const s=n.getLocalization("section.change.restrictedwidgets");o.postMessage(l.MX.MESSAGING_WARNING,s,"*"),o.postMessage(l.MX.SET_RESTRICTED_WIDGETS,!0,"*")})),e()}))}))):e()}));await u,i(fe.cL(a,r,s,p,d,g))}catch(e){o.logger.logException(e)}},zt=(e,t,i,n)=>async(o,a,r)=>{try{await Ke.uw(e,t,i,n)(o,a,r)}catch(e){r.logger.logException(e)}};var bt=i(9907),At=i.n(bt),St=i(9968);const Et=(e,t,i,n,o=null)=>async(a,r,{logger:s})=>{try{const{widgets:s,widgetVariants:c,metadata:l,markups:d,displayedWidgetVariants:p}=r(),g=s[e],u=p[e],y=At()(c[u].properties),m=null!=o?o:y,M=l.widgets[g.type],f=await tt.Yr(M.markupUrl,m);d.variants[u].isDirty&&a((0,Ge.M5)(u,y,f));const D={identifier:(0,et.c)(),name:t,properties:m,conditionTypeParameters:n};return a((0,Ge.Sk)(D,e,f,i)),D.identifier}catch(e){s.logException(e)}},Lt=(e,t)=>async(i,n)=>{const{widgets:o,displayedWidgetVariants:a}=n(),r=o[e].variants,s=r.indexOf(t);let c=a[e];c===t&&(c=r[s+1]||r[0]),i((0,St.i)(c,e)),i((0,Ge.S9)(e,t))};var vt=i(9168);const kt=(e,t)=>(i,n,o)=>{vt.CK(e,t)(i,n,o)},Ct=(e,t,i,n)=>async(o,a,r)=>{try{await vt.YX(e,t,i,n)(o,a,r)}catch(e){r.logger.logException(e)}},xt=(e,t)=>async(i,n,o)=>{try{await vt.Oc(e,t)(i,n,o)}catch(e){o.logger.logException(e)}},Qt=(e,t)=>async(i,n,{logger:o,messaging:a})=>{try{i(Te(e,t)),a.postMessage(l.MX.SAVE_TEMP_CONFIGURATION,null,"*")}catch(e){o.logException(e)}};var Pt=i(100),Ut=i(2392);const Yt=(e,t,i=null,n=null)=>async(a,r)=>{const s=await a(dt()),{clipboard:c,editableAreasConfiguration:l,metadata:d,widgetZonesConfiguration:p}=r(),g=(0,Ut.o5)(l,p,d,i,n),u=s.copiedWidgets.length+c.widgets.restrictedWidgets.length+g.length;a((0,Ut._Q)(e,ne.HH.AddWidget,t,i,n,u)),a(((e,t)=>(i,n)=>{const{editableAreasConfiguration:a,clipboard:r,widgetZonesConfiguration:s}=n(),{widgetRestrictions:c}=a[e],{copiedWidgets:l,restrictedWidgets:d}=r.widgets,p=[...l,...d];let g=null!==c?p.filter((e=>(0,nt.gT)(c,e.widgetType))).map((e=>e.widgetType)):p.map((e=>e.widgetType));t&&(g=g.filter((e=>{var i;const n=null===(i=s[t])||void 0===i?void 0:i.widgetRestrictions;return(0,nt.gT)(n,e)}))),i(Ne(o._k.getUniqueValues(g)))})(i,n)),a((0,Pt.wP)(g))},Wt=(e,t,i=null,n=null)=>async(o,a)=>{const r=await o(dt());o((0,Ut._Q)(e,ne.HH.AddSection,t,i,n,r.copiedSections.length)),o((e=>(t,i)=>{const{editableAreasConfiguration:n,clipboard:o}=i(),{copiedSections:a}=o.sections,{sectionRestrictions:r,widgetRestrictions:s}=n[e];let c=a;r&&(c=a.filter((e=>(0,nt.gT)(r,e.sectionType)))),s&&(c=c.filter((e=>!Ot(e.zones,s))));const l=c.map((e=>e.clipboardItemIdentifier));t(je(l))})(i))};var Vt=i(3520);var Ft=(0,Ze.U)(((e,t)=>({sectionsInArea:e.editableAreas[t.identifier].sections,dragAndDrop:e.dragAndDrop})),(()=>({removeSection:Nt,changeSection:jt})))(Vt.c),Ht=i(7808);const _t=[".buttonTooltip","is-template-button",".icon","button-type"];var Rt=(0,Be._M)({data(){return{changePropertiesIcon:l.ae.Properties,buttonType:l.i6.Properties}},computed:{localizedButtonTooltip(){return this.$_localizationService.getLocalization(this.buttonTooltip)}},methods:{onOpenPropertiesDialog(){this.openModalDialog({componentIdentifier:this.identifier,dialogType:this.dialogType,showFooter:!0})}},props:{identifier:{required:!0,type:String},buttonTooltip:{required:!0,type:String},dialogType:{required:!0,type:String},isTemplateButton:{default:!1,type:Boolean},openModalDialog:{type:Function}}}),Bt=i(5772);var Zt=(0,Bt.c)(Rt,[["render",function(e,t,i,n,o,a){return(0,Be.Wz)(),(0,Be.An)("kentico-header-button",{".buttonTooltip":e.localizedButtonTooltip,"is-template-button":e.isTemplateButton,".icon":e.changePropertiesIcon,"button-type":e.buttonType,onClick:t[0]||(t[0]=(...t)=>e.onOpenPropertiesDialog&&e.onOpenPropertiesDialog(...t))},null,40,_t)}]]);const Gt=(e,t,i)=>{const{componentIdentifier:n,dialogType:o}=e,{displayedWidgetVariants:a,metadata:r,sections:s,widgets:c,pageTemplate:d,widgetVariants:p}=t;let g;switch(o){case ne.S2.WidgetProperties:g={title:r.widgets[c[n].type].name,markupUrl:r.widgets[c[n].type].propertiesFormMarkupUrl,model:p[a[n]].properties,theme:l.So.Widget};break;case ne.S2.SectionProperties:g={title:r.sections[s[n].type].name,markupUrl:r.sections[s[n].type].propertiesFormMarkupUrl,model:s[n].properties,theme:l.So.Section};break;case ne.S2.TemplateProperties:g={title:r.pageTemplates[d.identifier].name,markupUrl:r.pageTemplates[d.identifier].propertiesFormMarkupUrl,model:d.properties,theme:l.So.Template}}return Object.assign(Object.assign({},g),{title:i.getLocalization("widgetproperties.header",g.title)})};var qt=(0,Ze.U)((()=>({})),(()=>({openModalDialog:new Ht.O(Gt).openModalDialog})))(Zt);const $t=["title"];var Kt=(0,Be._M)({computed:{buttonTitle(){return this.$_localizationService.getLocalization(this.tooltip)}},methods:{async onCopy(){await this.copy(this.identifier)}},props:{tooltip:{type:String},identifier:{required:!0,type:String},copy:{type:Function}}});var Xt=(0,Bt.c)(Kt,[["render",function(e,t,i,n,o,a){return(0,Be.Wz)(),(0,Be.An)("kentico-header-button",{title:e.buttonTitle,icon:"icon-doc-copy",onClick:t[0]||(t[0]=(0,Be.Y7)(((...t)=>e.onCopy&&e.onCopy(...t)),["stop"]))},null,8,$t)}]]);const Jt=(0,Ze.U)((()=>({})),(()=>({copy:at})))(Xt),ei=(0,Ze.U)((()=>({})),(()=>({copy:rt})))(Xt);var ti=(0,Be._M)({__name:"SectionHeaderExtraButtons",props:{sectionIdentifier:{},showPropertiesButton:{type:Boolean}},setup(e){const t=(0,Be.qo)(l.i6.Properties),i=(0,Be.qo)(ne.S2.SectionProperties),n=(0,Be.qo)("clipboard.sections.copybutton.tooltip");return(e,o)=>((0,Be.Wz)(),(0,Be.An)("div",null,[e.showPropertiesButton?((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(qt),{key:0,identifier:e.sectionIdentifier,dialogType:i.value,"button-type":t.value,buttonTooltip:"section.propertiesButtonTooltip"},null,8,["identifier","dialogType","button-type"])):(0,Be.g1)("",!0),(0,Be.K2)((0,Be.KV)(ei),{identifier:e.sectionIdentifier,tooltip:n.value},null,8,["identifier","tooltip"])]))}});var ii=(0,Ze.U)(((e,t)=>{const i=e.sections[t.sectionIdentifier];return{showPropertiesButton:!!i&&e.metadata.sections[i.type].hasProperties}}))(ti),ni=i(5072);var oi=i(3628);const ai=[".localizationService",".widgetTitle"],ri={slot:"extraHeaderButtons",class:"ktc-extra-header-buttons"};var si=i(3440),ci=i(5380);const li=[".localizationService",".builderConfig",".httpClient","show-personalization-popup",".popupItems",".activeItemIdentifier",".personalizationPopupHorizontalPosition",".personalizationPopupVerticalPosition",".personalizationPopupColumnType",".personalizationConditionTypes",".conditionType",".selectVariant",".addVariant",".updateVariant",".deleteVariant",".changeVariantsPriority","button-type"];var di=i(7836),pi=i(1220),gi=(0,Be._M)({mixins:[di.Cc],data(){return{buttonType:l.i6.Personalization,builderConfig:b.sT,httpClient:b.KY}},methods:{onOpenPersonalizationPopup(){if(this.isPersonalizationOpen)return void this.closePopup();const e=this.$refs.personalizationButton;this.openPopup(this.widgetIdentifier,(0,pi.Qn)(e.getBoundingClientRect(),se.cB,pi.Oc.Percent),(0,pi.se)(e.getBoundingClientRect()),ne.HH.Personalization)},selectVariant(e){this.selectWidgetVariant(this.widgetIdentifier,e.key)},addVariant(e,t,i){this.addWidgetVariant(this.widgetIdentifier,e,t,i)},updateVariant(e,t,i){this.updateWidgetConditionTypeParameters(i,e,t)},deleteVariant(e){this.removeWidgetVariant(this.widgetIdentifier,e)},changeVariantsOrder(e){this.changeVariantsPriority(this.widgetIdentifier,e)},onClickAway(e){this.$nextTick((()=>{this.isPersonalizationOpen&&!o.sL.isFriendlyElementSelected(e,this.friendlyElementSelectors)&&this.closePopup()}))}},props:{widgetIdentifier:{required:!0,type:String},isPersonalizationOpen:{type:Boolean},popupItems:{type:Array},personalizationDialogHorizontalPosition:{type:String},personalizationDialogVerticalPosition:{type:String},personalizationDialogColumnType:{type:String},activeItemIdentifier:{type:String},conditionType:{type:String},personalizationConditionTypes:{type:Object},friendlyElementSelectors:{default:()=>[],type:Array},addWidgetVariant:{type:Function},updateWidgetConditionTypeParameters:{type:Function},removeWidgetVariant:{type:Function},closePopup:{type:Function},openPopup:{type:Function},selectWidgetVariant:{type:Function},changeVariantsPriority:{type:Function}}});var ui=(0,Bt.c)(gi,[["render",function(e,t,i,n,o,a){const r=(0,Be.iS)("click-away");return(0,Be.wt)(((0,Be.Wz)(),(0,Be.An)("kentico-personalization-button",{ref:"personalizationButton",".localizationService":e.$_localizationService,".builderConfig":e.builderConfig,".httpClient":e.httpClient,"show-personalization-popup":e.isPersonalizationOpen,".popupItems":e.popupItems,".activeItemIdentifier":e.activeItemIdentifier,".personalizationPopupHorizontalPosition":e.personalizationDialogHorizontalPosition,".personalizationPopupVerticalPosition":e.personalizationDialogVerticalPosition,".personalizationPopupColumnType":e.personalizationDialogColumnType,".personalizationConditionTypes":e.personalizationConditionTypes,".conditionType":e.conditionType,"on:openPersonalizationPopup":t[0]||(t[0]=(...t)=>e.onOpenPersonalizationPopup&&e.onOpenPersonalizationPopup(...t)),".selectVariant":e.selectVariant,".addVariant":e.addVariant,".updateVariant":e.updateVariant,".deleteVariant":e.deleteVariant,".changeVariantsPriority":e.changeVariantsOrder,"on:closePersonalizationPopup":t[1]||(t[1]=(...t)=>e.closePopup&&e.closePopup(...t)),"button-type":e.buttonType},null,40,li)),[[r,e.onClickAway]])}]]);const yi=(e,t,{widgets:i,metadata:a,widgetVariants:r})=>{const s=Object.values($e()(r,i[t].variants));return e?(e=>{const t=(0,n.Km)(l.UH.LocalizationService).getLocalization("variant.original");let i;const a=At()(e).reverse().map(((e,n)=>(e.name||(i=n),{name:e.name||t,iconClass:null,key:e.identifier,description:e.name||t,renderActionButtons:!!e.name,parameters:e.conditionTypeParameters})));return o._k.move(a,i,a.length-1)})(s):(0,n.Km)(l.UH.PopUpElementsService).getWidgetElements(Object.values(a.personalizationConditionTypes))};var mi=(0,Ze.U)(((e,{widgetIdentifier:t})=>{const{widgets:i,widgetVariants:n,displayedWidgetVariants:o,popup:a,metadata:r}=e,s=i[t]?i[t].conditionType:null,c=t===a.componentIdentifier&&a.popupType===ne.HH.Personalization,l=i[t]?yi(!!s,t,e):[],d=o[t]?n[o[t]].identifier:null,p=r.personalizationConditionTypes;return{isPersonalizationOpen:c,popupItems:l,personalizationDialogHorizontalPosition:a.horizontalPosition,personalizationDialogVerticalPosition:a.verticalPosition,personalizationDialogColumnType:a.columnType,activeItemIdentifier:d,conditionType:s,personalizationConditionTypes:p,friendlyElementSelectors:[`.${si.M}`]}}),(()=>({addWidgetVariant:Et,updateWidgetConditionTypeParameters:Ge.S_,removeWidgetVariant:Lt,openPopup:fe._Q,closePopup:fe.Sq,selectWidgetVariant:ci.iu,changeVariantsPriority:Ie})))(ui),Mi=(0,Be._M)({components:{WidgetPropertiesButton:qt,WidgetPersonalization:mi,CopyWidgetButton:Jt},data(){return{showHeaderBelow:!1,propertiesDialogType:ne.S2.WidgetProperties,copyButtonTooltip:"clipboard.widgets.copybutton.tooltip"}},computed:{isPersonalizationAvailable(){return b.sT.featureSet.personalizationEnabled&&!o.wd.isEmpty(this.personalizationConditionTypes)},headerClasses(){return{"ktc-widget-header--top":!this.showHeaderBelow,"ktc-widget-header--bottom":this.showHeaderBelow,"ktc-widget-header--hidden":!this.showWidgetHeader}}},mounted(){this.ensureHeaderPosition()},updated(){this.ensureHeaderPosition()},methods:{ensureHeaderPosition(){this.showHeaderBelow=this.widgetTopOffset<this.$el.clientHeight}},props:{widgetTitle:{required:!0,type:String},widgetIdentifier:{required:!0,type:String},widgetTopOffset:{required:!0,type:Number},showWidgetHeader:{type:Boolean},personalizationConditionTypes:{type:Object},showPropertiesButton:{type:Boolean}}});var fi=(0,Bt.c)(Mi,[["render",function(e,t,i,n,o,a){const r=(0,Be.E1)("WidgetPersonalization"),s=(0,Be.E1)("WidgetPropertiesButton"),c=(0,Be.E1)("CopyWidgetButton");return(0,Be.Wz)(),(0,Be.An)("kentico-widget-header",{".localizationService":e.$_localizationService,class:(0,Be.WN)(e.headerClasses),".widgetTitle":e.widgetTitle,"on:removeWidget":t[0]||(t[0]=t=>e.$emit(t.type))},[(0,Be.QD)("div",ri,[e.isPersonalizationAvailable?((0,Be.Wz)(),(0,Be.Az)(r,{key:0,widgetIdentifier:e.widgetIdentifier},null,8,["widgetIdentifier"])):(0,Be.g1)("",!0),e.showPropertiesButton?((0,Be.Wz)(),(0,Be.Az)(s,{key:1,identifier:e.widgetIdentifier,dialogType:e.propertiesDialogType,buttonTooltip:"widget.propertiesButtonTooltip"},null,8,["identifier","dialogType"])):(0,Be.g1)("",!0),(0,Be.K2)(c,{identifier:e.widgetIdentifier,tooltip:e.copyButtonTooltip},null,8,["identifier","tooltip"])])],42,ai)}],["__scopeId","data-v-22dcce2e"]]);var Di=(0,Ze.U)(((e,{widgetIdentifier:t})=>{const{widgets:i,widgetSelection:n,dragAndDrop:o,highlightedWidget:a,metadata:r}=e;return{showWidgetHeader:(a===t||n.identifier===t)&&!o.itemIdentifier,personalizationConditionTypes:r.personalizationConditionTypes,showPropertiesButton:!!i[t]&&r.widgets[i[t].type].hasEditableProperties}}))(fi),Ii=i(5948);var Ti=(0,Ze.U)(((e,t)=>{const{dragAndDrop:i,widgets:n,popup:o,zones:a,sections:r}=e,{sectionIdentifier:s,zoneIndex:c}=t,l=r[s]?r[s].zones[c]:"";return{zoneIdentifier:l,dragAndDrop:i,zone:a[l],popup:o,widgetsInZone:a[l]?a[l].widgets.map((e=>n[e])):[]}}),(()=>({removeWidget:kt,closePopup:fe.Sq,openPopup:(e,t,i=null,n=null)=>Yt(e,t,i,n)})))(Ii.c),hi=(0,Be._M)({components:{WidgetZone:Ti,WidgetHeader:Di},props:Object.assign({},oi.k)});var Oi=(0,Bt.c)(hi,[["render",function(e,t,i,n,o,a){const r=(0,Be.E1)("WidgetHeader"),s=(0,Be.E1)("WidgetZone",!0);return(0,Be.Wz)(),(0,Be.Az)(s,{sectionIdentifier:e.sectionIdentifier,zoneIndex:e.zoneIndex,areaIdentifier:e.areaIdentifier},{widgetHeader:(0,Be.Ql)((({widgetTitle:e,widgetIdentifier:t,widgetTopOffset:i})=>[(0,Be.K2)(r,{widgetTitle:e,widgetIdentifier:t,widgetTopOffset:i},null,8,["widgetTitle","widgetIdentifier","widgetTopOffset"])])),_:1},8,["sectionIdentifier","zoneIndex","areaIdentifier"])}]]);var wi=(0,Be._M)({mixins:[ni.u],created(){this.widgetZone=(0,Be.Md)(Oi)}}),Ni=i(4364);var ji=(0,Ze.U)((({popup:e},{sectionIdentifier:t})=>({isSectionListOpen:e.componentIdentifier===t&&e.popupType===ne.HH.AddSection})),(()=>({closePopup:Pt.Sq,openPopup:Wt,setPopupPosition:Pt.Om})))(Ni.c);var zi=(0,Be._M)({__name:"EditableArea",props:{identifier:{}},setup(e){return(e,t)=>((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(Ft),{identifier:e.identifier},{sectionMarkup:(0,Be.Ql)((({sectionMarkup:t,sectionIdentifier:i})=>[(0,Be.K2)(wi,{sectionMarkup:t,sectionIdentifier:i,areaIdentifier:e.identifier},null,8,["sectionMarkup","sectionIdentifier","areaIdentifier"])])),sectionHeaderExtraButtons:(0,Be.Ql)((({sectionIdentifier:e})=>[(0,Be.K2)((0,Be.KV)(ii),{sectionIdentifier:e},null,8,["sectionIdentifier"])])),sectionDivider:(0,Be.Ql)((({sectionIdentifier:e,areaIdentifier:t})=>[(0,Be.K2)((0,Be.KV)(ji),{sectionIdentifier:e,areaIdentifier:t},null,8,["sectionIdentifier","areaIdentifier"])])),_:1},8,["identifier"]))}}),bi=i(4540),Ai=i(4612),Si=i(5836);const Ei=e=>(...[t,i,n])=>((0,Ai.Ex)(e),((e,t,i)=>async(n,o,a)=>{try{return vt.WG(e,t,i)(n,o,a)}catch(e){a.logger.logException(e)}})(t,i,n));var Li=(0,Ze.U)((({modalDialogs:e,popup:t})=>({modalDialogs:e.dialogs.filter((e=>e.type===ne.S2.Custom)),popupType:t.popupType})),(()=>({selectItem:e=>new Si.y(Ei(e),wt).selectItem(e)})))(bi.c),vi=i(1396),ki=i(4236);class Ci{constructor(e,t,i){this.setWidgetPropertiesThunk=e,this.setSectionPropertiesThunk=t,this.setPageTemplatePropertiesThunk=i,this.submitPropertiesDialogForm=(e,t,i,n)=>async(o,a,r)=>{try{const r=await(0,ki.t)(t,n);if(this.isFormValid(r)){const{modalDialogs:t}=a(),n=t.dialogs[e],s=Object.assign({},i,r.data.properties);if(!xe()(i,s)){const e=this.getSetPropertiesThunk(n.type);await o(e(n.identifier,s))}o((0,ci.sv)(e))}else o((0,vi.Yj)(e)),o((0,vi.oR)(e,r.data))}catch(e){r.logger.logException(e)}},this.getSetPropertiesThunk=e=>{switch(e){case ne.S2.WidgetProperties:return this.setWidgetPropertiesThunk;case ne.S2.SectionProperties:return this.setSectionPropertiesThunk;case ne.S2.TemplateProperties:return this.setPageTemplatePropertiesThunk}},this.isFormValid=e=>"valid"===e.status}}const xi=["id",".configuration",".messages",".isModified"],Qi=[".localizationService",".formMarkup",".componentName",".isValid",".theme",".openedDialogsCount"];var Pi=i(1460);var Ui=(0,Be._M)({data(){return{$refs:undefined,dialogIndex:0,formChanged:!1}},computed:{dialogConfiguration(){return{title:this.componentName,showFooter:!0,applyButtonText:this.$_localizationService.getLocalization("widgetproperties.apply"),cancelButtonText:this.$_localizationService.getLocalization("widgetproperties.cancel"),tabs:null,theme:this.dialogTheme,showLoader:!1,dialogIndex:this.dialogIndex,openedDialogsCount:this.dialogsCount,width:"600px",maximized:!1,setPosition:!1}},modalDialogStyles(){return this.dialogsCount>1?{}:{top:0,left:0,bottom:0,right:0,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10200}},dialogMessages(){return{unsavedChanges:this.$_localizationService.getLocalization("modalDialog.close.confirmation"),loaderMessage:this.$_localizationService.getLocalization("modaldialogs.loading"),closeTooltip:this.$_localizationService.getLocalization("typelist.closeTooltip")}}},async mounted(){(0,Pi.g)(document),await this.fetchMarkup(this.dialogIndex,this.propertiesFormUrl,this.properties)},beforeUnmount(){0===this.dialogIndex&&(0,Pi.Q)(document)},methods:{async onSubmitPropertiesForm(e){await this.submitDialogForm(this.dialogIndex,e.detail.configurationForm.getAttribute("action"),this.properties,e.detail.formData)},onFormChange(){this.formChanged=!0},onDialogClose(){this.closeDialog(this.dialogIndex)},async onDialogApply(){await this.$refs.propertiesForm.validateProperties()}},props:{formMarkup:{type:String},properties:{type:Object},propertiesFormUrl:{type:String},componentName:{type:String},formIsValid:{type:Boolean},dialogId:{type:String},dialogTheme:{type:String},dialogsCount:{type:Number},closeDialog:{type:Function},fetchMarkup:{type:Function},submitDialogForm:{type:Function}}});var Yi=(0,Bt.c)(Ui,[["render",function(e,t,i,n,o,a){return(0,Be.Wz)(),(0,Be.An)("kentico-modal-dialog",{id:e.dialogId,".configuration":e.dialogConfiguration,".messages":e.dialogMessages,".isModified":e.formChanged,style:(0,Be.c$)(e.modalDialogStyles),onApply:t[2]||(t[2]=(...t)=>e.onDialogApply&&e.onDialogApply(...t)),onClose:t[3]||(t[3]=(...t)=>e.onDialogClose&&e.onDialogClose(...t))},[(0,Be.QD)("kentico-properties-form",{ref:"propertiesForm",".localizationService":e.$_localizationService,".formMarkup":e.formMarkup,".componentName":e.componentName,".isValid":e.formIsValid,".theme":e.dialogTheme,".openedDialogsCount":e.dialogsCount,"on:submitPropertiesForm":t[0]||(t[0]=(...t)=>e.onSubmitPropertiesForm&&e.onSubmitPropertiesForm(...t)),"on:formChange":t[1]||(t[1]=(...t)=>e.onFormChange&&e.onFormChange(...t))},null,40,Qi)],44,xi)}]]);var Wi=(0,Ze.U)((e=>{const{modalDialogs:t}=e,i=t.dialogs[0];if(!i)return null;const{type:n,markup:o,isValid:a,title:r,markupUrl:s,model:c}=i;return{componentName:r,dialogId:se.WO,dialogType:n,dialogTheme:t.theme,formMarkup:o,properties:c,propertiesFormUrl:s,formIsValid:a,dialogsCount:t.dialogs.length}}),(()=>({closeDialog:ci.sv,fetchMarkup:ci.Kq,submitDialogForm:new Ci(xt,ci.yS,Qt).submitPropertiesDialogForm})))(Yi);const Vi=[".buttonTooltip",".icon","button-type"];var Fi=i(240),Hi=(0,Be._M)({data(){return{changeTemplateIcon:l.ae.Change,buttonType:l.i6.Change}},computed:{localizedButtonTooltip(){return this.$_localizationService.getLocalization(this.buttonTooltip)}},methods:{openChangeTemplatePopup(){this.openModalDialog({url:this.dialogUrl,data:{currentTemplateIdentifier:this.currentTemplateIdentifier},title:this.$_localizationService.getLocalization("template.change"),theme:l.So.Template,applyCallback:this.applyCallback,showFooter:!0})},changePageTemplate(e){z.postMessage(l.MX.CONFIGURATION_CHANGED,null,"*"),z.postMessage(l.MX.CHANGE_TEMPLATE,e,"*")},async applyCallback(e){const t=e.document.querySelector(".ktc-FlatSelectedItem");if(!!!t)return{closeDialog:!1};if(t.getAttribute("data-identifier")===this.currentTemplateIdentifier)return{closeDialog:!0};const i=this.$_localizationService.getLocalization("template.change.confirmation");if(!await(0,Fi.G)(i))return{closeDialog:!1};const n=t.dataset.identifier;return this.changePageTemplate(n),{closeDialog:!0}}},props:{buttonTooltip:{required:!0,type:String},dialogUrl:{type:String},currentTemplateIdentifier:{type:String},openModalDialog:{type:Function}}});var _i=(0,Bt.c)(Hi,[["render",function(e,t,i,n,o,a){return(0,Be.Wz)(),(0,Be.An)("kentico-header-button",{".buttonTooltip":e.localizedButtonTooltip,".icon":e.changeTemplateIcon,"is-template-button":!0,"button-type":e.buttonType,onClick:t[0]||(t[0]=(...t)=>e.openChangeTemplatePopup&&e.openChangeTemplatePopup(...t))},null,40,Vi)}]]);var Ri=(0,Ze.U)((({config:e,pageTemplate:t})=>({currentTemplateIdentifier:t.configurationIdentifier?t.configurationIdentifier:t.identifier,dialogUrl:e.pageTemplate.selectorDialogEndpoint})),(()=>({openModalDialog:P.m2})))(_i);const Bi={class:"ktc-template-header"};var Zi=(0,Be._M)({__name:"TemplateButtons",props:{hasTemplate:{type:Boolean},hasTemplateProperties:{type:Boolean},templateIdentifier:{}},setup(e){const t=(0,Be.qo)(ne.S2.TemplateProperties);return(e,i)=>((0,Be.Wz)(),(0,Be.An)("div",Bi,[e.hasTemplate?((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(Ri),{key:0,buttonTooltip:"template.changebuttontooltip"})):(0,Be.g1)("",!0),e.hasTemplateProperties?((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(qt),{key:1,buttonTooltip:"template.propertiesbuttontooltip",identifier:e.templateIdentifier,isTemplateButton:!0,dialogType:t.value},null,8,["identifier","dialogType"])):(0,Be.g1)("",!0)]))}}),Gi=i(8700);const qi={key:0,class:"ktc-clipboard-entries"},$i=["text"];const Ki={key:0},Xi=["text"],Ji=[".items",".columnType"];var en=(0,Be._M)({methods:{onItemSelect({detail:e}){e.disabled||this.pasteItem(e.key)},onDeleteWidgetFromClipboard({detail:e}){e.deletable&&this.deleteItemFromClipboard(e.key)},onItemMouseEnter({detail:e}){const{key:t,rect:i}=e,n=window.scrollY+i.top+i.height,o=window.scrollX+i.left;this.showThumbnail(t,n,o)},onItemMouseLeave({detail:e}){this.hideThumbnail(e)}},props:{showItems:{type:Boolean},columnType:{type:String},popupItems:{type:Array},headerText:{type:String},pasteItem:{type:Function},showThumbnail:{type:Function},hideThumbnail:{type:Function},deleteItemFromClipboard:{type:Function}}});var tn=(0,Bt.c)(en,[["render",function(e,t,i,n,o,a){return e.showItems&&e.popupItems.length?((0,Be.Wz)(),(0,Be.An)("div",Ki,[(0,Be.QD)("kentico-popup-content-header",{text:e.headerText},null,8,Xi),(0,Be.QD)("kentico-pop-up-listing",{".items":e.popupItems,".columnType":e.columnType,"on:selectItem":t[0]||(t[0]=(0,Be.Y7)(((...t)=>e.onItemSelect&&e.onItemSelect(...t)),["stop"])),"on:removeItem":t[1]||(t[1]=(0,Be.Y7)(((...t)=>e.onDeleteWidgetFromClipboard&&e.onDeleteWidgetFromClipboard(...t)),["stop"])),"on:itemMouseEnter":t[2]||(t[2]=(...t)=>e.onItemMouseEnter&&e.onItemMouseEnter(...t)),"on:itemMouseLeave":t[3]||(t[3]=(...t)=>e.onItemMouseLeave&&e.onItemMouseLeave(...t))},null,40,Ji)])):(0,Be.g1)("",!0)}],["__scopeId","data-v-99e6aeb6"]]);var nn=(0,Ze.U)((({metadata:e,clipboard:t,popup:i,editableAreasConfiguration:o,widgetZonesConfiguration:a})=>{const r=(0,n.Km)(l.UH.LocalizationService),{copiedWidgets:s,pastableWidgets:c}=t.widgets,d=r.getLocalization("clipboard.deletebuttontooltip"),p=r.getLocalization("widget.copiedwidgets.popup.header"),g=s.map((({widgetType:t,clipboardItemIdentifier:n,conditionType:s})=>{var l,p,g,u,y,m;const{name:M,description:f,iconClass:D}=e.widgets[t],I=!c.includes(t);let T=f;if(I){const e=!(null===(g=null===(p=null===(l=o[i.areaIdentifier])||void 0===l?void 0:l.widgetRestrictions)||void 0===p?void 0:p.includes(t))||void 0===g||g);T=!(null===(m=null===(y=null===(u=a[i.zoneIdentifier])||void 0===u?void 0:u.widgetRestrictions)||void 0===y?void 0:y.includes(t))||void 0===m||m)&&e?r.getLocalization("widgetlist.copiedwidget.zoneareanotallowed"):e?r.getLocalization("widgetlist.copiedwidget.notallowed"):r.getLocalization("widgetlist.copiedwidget.zonenotallowed")}const h={name:M,iconClass:D,description:T,key:n,disabled:I,deletable:!0,deleteButtonTitle:d};if(s){const e=r.getLocalization("clipboard.widgets.tooltipwithvariants",h.name);return Object.assign(Object.assign({},h),{tooltip:h.description?`${e}\n${h.description}`:e,secondaryIconClass:"icon-personalisation-variants"})}return h})),u=i.filterPhrase?(0,Gi.A)(g.filter((e=>!e.disabled)),i.filterPhrase):g;return{popupItems:u,showItems:i.popupType===ne.HH.AddWidget&&u.length>0,columnType:i.columnType,headerText:p}}),(()=>({pasteItem:ct,showThumbnail:Le,hideThumbnail:ve,deleteItemFromClipboard:gt})))(tn);var on=(0,Ze.U)((({metadata:e,clipboard:t,popup:i})=>{const o=(0,n.Km)(l.UH.LocalizationService),{copiedSections:a,pastableSections:r}=t.sections,s=o.getLocalization("clipboard.deletebuttontooltip"),c=o.getLocalization("section.copiedsections.popup.header"),d=a.map((({clipboardItemIdentifier:t,sectionType:i,zones:n})=>{const{name:a,description:c,iconClass:l}=e.sections[i],d=!r.includes(t),p=n.flatMap((e=>e)).some((e=>e.conditionType));let g=d?o.getLocalization("sectionlist.copiedsection.notallowed"):c;const u={name:a,iconClass:l,description:g,key:t,disabled:d,deletable:!0,deleteButtonTitle:s};if(p){return g=`${o.getLocalization("sectionlist.copiedsection.tooltipwithvariants",a)}\n${g}`,Object.assign(Object.assign({},u),{secondaryIconClass:"icon-personalisation-variants",tooltip:g})}return u}));return{popupItems:d,showItems:i.popupType===ne.HH.AddSection&&t.sections.copiedSections.length>0,columnType:i.columnType,headerText:c}}),(()=>({pasteItem:lt,showThumbnail:Le,hideThumbnail:ve,deleteItemFromClipboard:pt})))(tn);var an=(0,Ze.U)((({metadata:e,clipboard:t,popup:i,editableAreasConfiguration:o,widgetZonesConfiguration:a})=>{const r=(0,n.Km)(l.UH.LocalizationService),{restrictedWidgets:s,pastableWidgets:c}=t.widgets,d=r.getLocalization("clipboard.deletebuttontooltip"),p=r.getLocalization("widget.restrictedwidgets.popup.header"),g=s.map((({widgetType:t,clipboardItemIdentifier:n,conditionType:s})=>{var l,p,g,u,y,m;const{name:M,description:f,iconClass:D}=e.widgets[t],I=!c.includes(t);let T=f;if(I){const e=!(null===(g=null===(p=null===(l=o[i.areaIdentifier])||void 0===l?void 0:l.widgetRestrictions)||void 0===p?void 0:p.includes(t))||void 0===g||g);T=!(null===(m=null===(y=null===(u=a[i.zoneIdentifier])||void 0===u?void 0:u.widgetRestrictions)||void 0===y?void 0:y.includes(t))||void 0===m||m)&&e?r.getLocalization("widgetlist.copiedwidget.zoneareanotallowed"):e?r.getLocalization("widgetlist.copiedwidget.notallowed"):r.getLocalization("widgetlist.copiedwidget.zonenotallowed")}const h={name:M,iconClass:D,description:T,key:n,disabled:I,deletable:!0,deleteButtonTitle:d};if(s){const e=r.getLocalization("clipboard.widgets.tooltipwithvariants",h.name);return Object.assign(Object.assign({},h),{tooltip:h.description?`${e}\n${h.description}`:e,secondaryIconClass:"icon-personalisation-variants"})}return h}));return{popupItems:g,showItems:i.popupType===ne.HH.AddWidget&&t.widgets.restrictedWidgets.length>0,columnType:i.columnType,headerText:p}}),(()=>({pasteItem:yt,showThumbnail:Le,hideThumbnail:ve,deleteItemFromClipboard:ut})))(tn),rn=i(5064),sn=(0,Be._M)({components:{RestrictedWidgetsList:an,CopiedWidgetsList:nn,CopiedSectionsList:on,RecentWidgets:rn.c},computed:{popupContentHeaderText(){return this.showWidgetClipboardEntries?this.$_localizationService.getLocalization("widget.widgets.popup.header"):this.showSectionClipboardEntries?this.$_localizationService.getLocalization("section.sections.popup.header"):void 0}},props:{showComponent:{type:Boolean},showWidgetClipboardEntries:{type:Boolean},showSectionClipboardEntries:{type:Boolean}}});var cn=(0,Bt.c)(sn,[["render",function(e,t,i,n,o,a){const r=(0,Be.E1)("RestrictedWidgetsList"),s=(0,Be.E1)("CopiedWidgetsList"),c=(0,Be.E1)("CopiedSectionsList"),l=(0,Be.E1)("RecentWidgets");return e.showComponent&&(e.showWidgetClipboardEntries||e.showSectionClipboardEntries)?((0,Be.Wz)(),(0,Be.An)("div",qi,[(0,Be.K2)(r),(0,Be.K2)(s),(0,Be.K2)(c),(0,Be.K2)(l),(0,Be.QD)("kentico-popup-content-header",{text:e.popupContentHeaderText},null,8,$i)])):(0,Be.g1)("",!0)}],["__scopeId","data-v-f9ba00da"]]);const ln=({editableAreasConfiguration:e,metadata:t,popup:i,widgetZonesConfiguration:n})=>{const o=e[i.areaIdentifier],a=n[i.zoneIdentifier];return(0,Gi.c)(i.popupType,t,o,a)},dn=e=>!e.popup.filterPhrase||(e=>{const t=ln(e);return(0,Gi.A)(t,e.popup.filterPhrase)})(e).length>0,pn=e=>{const{recentWidgets:t}=e.popup;if(!(null==t?void 0:t.length))return!1;return!(ln(e).length<=Ai.Yn)};var gn=(0,Ze.U)((e=>{const{popup:t,clipboard:i}=e;return{showComponent:t.popupType!==ne.HH.AddWidget||dn(e),showWidgetClipboardEntries:t.popupType===ne.HH.AddWidget&&(i.widgets.copiedWidgets.length>0||i.widgets.restrictedWidgets.length>0||pn(e)),showSectionClipboardEntries:t.popupType===ne.HH.AddSection&&i.sections.copiedSections.length>0}}))(cn);const un=[".imageUrl"];var yn=(0,Be._M)({__name:"ClipboardThumbnails",props:{thumbnails:{}},setup(e){return(e,t)=>((0,Be.Wz)(),(0,Be.Az)(Be.Q9,{name:"ktc-thumbnails"},{default:(0,Be.Ql)((()=>[((0,Be.Wz)(!0),(0,Be.An)(Be.ae,null,(0,Be.mi)(e.thumbnails,(e=>((0,Be.Wz)(),(0,Be.An)("kentico-thumbnail",{class:"ktc-clipboard-thumbnail",key:e.identifier,".imageUrl":e.url,style:(0,Be.c$)({left:`${e.left}px`,top:`${e.top}px`})},null,44,un)))),128))])),_:1}))}});var mn=(0,Bt.c)(yn,[["__scopeId","data-v-675efed0"]]);const Mn=({widgets:e,thumbnails:t})=>i=>{const n=e.copiedWidgets.find((e=>e.clipboardItemIdentifier===i)),o=e.restrictedWidgets.find((e=>e.clipboardItemIdentifier===i));return Object.assign(Object.assign({},t[i]),{identifier:i,url:(null==n?void 0:n.thumbnail)||(null==o?void 0:o.thumbnail)})},fn=({sections:e,thumbnails:t})=>i=>{const n=e.copiedSections.find((e=>e.clipboardItemIdentifier===i));return Object.assign(Object.assign({},t[i]),{identifier:i,url:null==n?void 0:n.thumbnail})};var Dn=(0,Ze.U)((({clipboard:e,popup:t})=>{const i=Object.keys(e.thumbnails);if(!i.length)return{thumbnails:[]};let n;return t.popupType===ne.HH.AddWidget?n=Mn(e):t.popupType===ne.HH.AddSection&&(n=fn(e)),{thumbnails:n?i.map(n):[]}}))(mn),In=i(5588);var Tn=(0,Be._M)({__name:"PageBuilderGlobalComponentWrapper",props:{hasTemplate:{type:Boolean},hasTemplateProperties:{type:Boolean},templateIdentifier:{},showPropertiesDialog:{type:Boolean}},setup(e){return(e,t)=>((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(Li),null,{"pop-up-content-filter":(0,Be.Ql)((()=>[(0,Be.K2)((0,Be.KV)(In.c))])),"pop-up-content-top":(0,Be.Ql)((()=>[(0,Be.K2)((0,Be.KV)(gn))])),default:(0,Be.Ql)((()=>[e.hasTemplate||e.hasTemplateProperties?((0,Be.Wz)(),(0,Be.Az)(Zi,{key:0,templateIdentifier:e.templateIdentifier,hasTemplate:e.hasTemplate,hasTemplateProperties:e.hasTemplateProperties},null,8,["templateIdentifier","hasTemplate","hasTemplateProperties"])):(0,Be.g1)("",!0),e.showPropertiesDialog?((0,Be.Wz)(),(0,Be.Az)((0,Be.KV)(Wi),{key:1})):(0,Be.g1)("",!0),(0,Be.K2)((0,Be.KV)(Dn))])),_:1}))}});var hn=(0,Ze.U)((({config:e,modalDialogs:t,pageTemplate:i,metadata:n})=>({hasTemplate:!!i&&e.pageTemplate.isSelectable,hasTemplateProperties:!!i&&i.identifier&&n.pageTemplates[i.identifier].hasProperties,templateIdentifier:i&&i.identifier,showPropertiesDialog:!!t.dialogs.length&&t.dialogs[0].type!==ne.S2.Custom})))(Tn),On=i(9368),wn=i(6276);const Nn=e=>{e&&e.toolbarButtons&&jn(e)},jn=e=>{if(Array.isArray(e.toolbarButtons))e.toolbarButtons=e.toolbarButtons.filter((e=>e!==wn.Qj));else if((0,On.i)(e.toolbarButtons))for(const t of Object.values(e.toolbarButtons))t&&t.buttons&&(t.buttons=t.buttons.filter((e=>e!==wn.Qj)))};var zn,bn,An,Sn=i(9764),En=function(e,t,i,n){var o,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},Ln=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vn=function(e,t){return function(i,n){t(i,n,e)}};let kn=class extends C.E{constructor(e,t,i){super(e,t,i)}async initializePageBuilder(e){const t=new ce(e.pageIdentifier,e.applicationPath,e.configurationEndpoints,e.metadataEndpoint,e.allowedOrigins,e.constants,e.featureSet,e.pageTemplate,e.selectors,e.clipboard);(0,Sn.S)(e.htmlSanitizer);const i=await super.initialize(t,(t=>Re(t,e.developmentMode)),hn,zi,Ct,zt);window.addEventListener("focus",(async()=>{const{popup:e}=i.getState(),t=[ne.HH.AddWidget,ne.HH.AddSection];if(e.componentIdentifier&&t.includes(e.popupType)){const e=i.dispatch;await e(dt())}})),ie.forEach((e=>e({namespace:window.kentico.modalDialog,config:t,dispatch:i.dispatch,localizationService:this.localizationService}))),document.addEventListener(ae.W,(({target:t,detail:i})=>{(0,oe.q)(t,i,Nn,e.htmlSanitizer)}))}};kn=En([(0,d.q)(),vn(0,(0,k.u)(l.UH.LocalizationService)),vn(1,(0,k.u)(l.UH.PageConfigurationService)),vn(2,(0,k.u)(l.UH.MessagingService)),Ln("design:paramtypes",["function"==typeof(zn=void 0!==x.LocalizationService&&x.LocalizationService)?zn:Object,"function"==typeof(bn=void 0!==s.M&&s.M)?bn:Object,"function"==typeof(An=void 0!==j.Y&&j.Y)?An:Object])],kn),(0,n.u2)(v),window.kentico=window.kentico||{},window.kentico.pageBuilder={init:async e=>{const t=(0,n.Yz)(kn);await t.initializePageBuilder(e)},registerInlineEditor:a.Ir},o.sz.disableDocumentLinks()}},i={};function n(e){var o=i[e];if(void 0!==o)return o.exports;var a=i[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=t,e=[],n.O=function(t,i,o,a){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],a=e[d][2];for(var s=!0,c=0;c<i.length;c++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[c])}))?i.splice(c--,1):(s=!1,a<r&&(r=a));if(s){e.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[i,o,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={604:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,r=i[0],s=i[1],c=i[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var d=c(n)}for(t&&t(i);l<r.length;l++)a=r[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},i=self.webpackChunkpage_builder=self.webpackChunkpage_builder||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var o=n.O(void 0,[275,984],(function(){return n(2958)}));o=n.O(o)}();